<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CYBER BREACH: SYSTEM FAILURE</title>
    <style>
        /* --- VISUAL CORE --- */
        :root {
            --bg-dark: #050505;
            --panel-bg: rgba(10, 12, 16, 0.95);
            --neon-cyan: #00f3ff;
            --neon-pink: #ff0055;
            --neon-green: #00ff66;
            --neon-gold: #ffcc00;
            --font-main: 'Courier New', monospace;
        }

        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; cursor: crosshair; }

        body {
            margin: 0; background-color: var(--bg-dark); color: white;
            font-family: var(--font-main); height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* Glitch Efekti (Risk Arttƒ±k√ßa Body'e Eklenir) */
        .glitch-effect {
            animation: glitch-anim 0.2s infinite;
        }

        @keyframes glitch-anim {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        /* Arkaplan */
        .cyber-grid {
            position: absolute; width: 200vw; height: 200vh;
            background-image: linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            transform: perspective(500px) rotateX(60deg) translateY(-100px) translateZ(-200px);
            animation: gridMove 20s linear infinite; z-index: -2;
        }
        @keyframes gridMove { 0% { transform: perspective(500px) rotateX(60deg) translateY(0); } 100% { transform: perspective(500px) rotateX(60deg) translateY(40px); } }

        /* CRT Ekran √áizgileri */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.1), rgba(0,0,0,0.1) 1px, transparent 1px, transparent 2px);
            pointer-events: none; z-index: 50;
        }

        /* --- LAYOUT --- */
        #game-layout {
            display: grid; grid-template-columns: 300px 1fr 320px; gap: 15px;
            width: 98vw; height: 95vh; max-width: 1800px; z-index: 10;
            transition: opacity 0.2s;
        }

        .panel {
            background: var(--panel-bg); border: 1px solid rgba(0, 243, 255, 0.2);
            padding: 15px; display: flex; flex-direction: column;
            box-shadow: 0 0 20px rgba(0,0,0,0.8); backdrop-filter: blur(5px);
            border-radius: 4px; position: relative; overflow: hidden;
        }

        h2 { 
            font-size: 1rem; border-bottom: 1px solid #333; padding-bottom: 8px; 
            margin: 0 0 10px 0; color: var(--neon-cyan); text-shadow: 0 0 5px var(--neon-cyan);
            display: flex; justify-content: space-between; align-items: center;
        }

        /* --- HACK BUTTON --- */
        #hack-container {
            flex-grow: 1; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; position: relative;
        }

        #hack-btn {
            width: 250px; height: 250px; border-radius: 50%;
            border: 5px solid var(--neon-cyan);
            background: radial-gradient(circle, rgba(0, 243, 255, 0.1) 0%, rgba(0,0,0,0.9) 100%);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            box-shadow: 0 0 40px rgba(0, 243, 255, 0.15), inset 0 0 20px rgba(0, 243, 255, 0.1);
            transition: 0.1s; position: relative; z-index: 5; cursor: pointer;
        }
        #hack-btn:active { transform: scale(0.95); border-color: white; box-shadow: 0 0 60px var(--neon-cyan); }
        #hack-btn.danger { border-color: var(--neon-pink); animation: shake 0.3s infinite; box-shadow: 0 0 50px var(--neon-pink); }

        .btn-icon { font-size: 4.5rem; pointer-events: none; text-shadow: 0 0 15px currentColor; }

        /* --- BARS & STATS --- */
        .progress-bar { height: 12px; background: #000; border: 1px solid #444; position: relative; overflow: hidden; margin-top: 5px; }
        .fill { height: 100%; width: 0%; transition: width 0.1s linear; }
        
        /* Level Bar */
        #xp-container { width: 100%; margin-bottom: 20px; }
        #xp-bar { height: 6px; background: #333; margin-top: 5px; }
        #xp-fill { height: 100%; background: var(--neon-gold); width: 0%; box-shadow: 0 0 10px var(--neon-gold); }

        /* --- SHOP ITEMS --- */
        .upgrade {
            display: flex; align-items: center; padding: 10px; margin-bottom: 8px;
            background: rgba(255,255,255,0.02); border: 1px solid #333; transition: 0.2s; cursor: pointer;
        }
        .upgrade:hover { background: rgba(255, 204, 0, 0.05); border-color: var(--neon-gold); }
        .upgrade.disabled { opacity: 0.4; pointer-events: none; filter: grayscale(1); }
        .up-icon { font-size: 1.5rem; margin-right: 10px; width: 30px; text-align: center; }
        .up-info { flex-grow: 1; }
        .up-name { font-weight: bold; font-size: 0.9rem; color: #fff; }
        .up-desc { font-size: 0.7rem; color: #888; }
        .up-cost { font-weight: bold; color: var(--neon-gold); font-size: 0.9rem; }

        /* --- CRASH SCREEN OVERLAY --- */
        #crash-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 9999; display: none;
            flex-direction: column; justify-content: center; align-items: center;
            font-family: 'Courier New', monospace;
        }
        .crash-text { color: var(--neon-pink); font-size: 2rem; margin-bottom: 20px; text-align: center; }
        .boot-text { color: var(--neon-green); font-size: 1rem; text-align: left; width: 80%; margin-top: 5px; }
        .cursor { animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* --- ANIMATIONS --- */
        .floating-text {
            position: absolute; font-size: 1.5rem; font-weight: bold; 
            animation: floatUp 0.8s forwards; pointer-events: none; z-index: 100;
            text-shadow: 0 0 5px black;
        }
        @keyframes floatUp { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-80px) scale(1.5); opacity: 0; } }

        #console-log {
            height: 150px; background: #000; border: 1px solid #333; padding: 10px;
            font-size: 0.75rem; color: var(--neon-green); overflow: hidden;
            display: flex; flex-direction: column-reverse;
        }
        .log-line { margin-bottom: 3px; border-left: 2px solid var(--neon-green); padding-left: 5px; }

        /* Music Toggle */
        #music-btn {
            position: absolute; top: 15px; right: 15px; z-index: 200;
            background: black; border: 1px solid var(--neon-cyan); color: var(--neon-cyan);
            padding: 5px 10px; cursor: pointer; font-size: 0.8rem;
        }

        @media (max-width: 900px) {
            #game-layout { grid-template-columns: 1fr; display: flex; flex-direction: column; overflow-y: auto; }
            .panel { margin-bottom: 10px; }
        }
    </style>
</head>
<body>

    <div class="cyber-grid"></div>
    <div class="scanlines"></div>

    <button id="music-btn" onclick="game.toggleAudio()">SES: KAPALI</button>

    <div id="crash-overlay">
        <div class="crash-text" id="crash-title">SYSTEM FAILURE</div>
        <div id="boot-sequence"></div>
    </div>

    <div id="game-layout">
        
        <div class="panel">
            <h2>HEDEF Sƒ∞STEMLER</h2>
            <div id="target-list"></div>
            
            <div style="margin-top: auto;">
                <h2>Sƒ∞STEM G√úNL√úƒû√ú</h2>
                <div id="console-log"></div>
            </div>
        </div>

        <div class="panel" id="hack-container">
            <div style="width: 100%; display: flex; justify-content: space-between; margin-bottom: 20px;">
                <div style="text-align: center;">
                    <div style="color:#888; font-size:0.8rem;">UPTIME</div>
                    <div id="uptime-display" style="color:white; font-weight:bold;">00:00:00</div>
                </div>
                <div style="text-align: center;">
                    <div style="color:#888; font-size:0.8rem;">BAKƒ∞YE</div>
                    <div id="money-display" style="color:var(--neon-gold); font-size:1.5rem; font-weight:bold;">0 ‚Çø</div>
                </div>
            </div>

            <div id="xp-container">
                <div style="display:flex; justify-content:space-between; font-size:0.8rem;">
                    <span style="color:var(--neon-cyan);">SEVƒ∞YE <span id="lvl-display">1</span></span>
                    <span style="color:#888;">XP</span>
                </div>
                <div id="xp-bar"><div id="xp-fill"></div></div>
            </div>

            <div style="font-size: 0.8rem; color: #888; margin-bottom: 10px;">
                ZAMAN √áARPANI: <span id="time-multi" style="color:white; font-weight:bold;">x1.0</span>
            </div>

            <div id="hack-btn" onclick="game.hack(event)">
                <div class="btn-icon">‚ò†</div>
                <div style="margin-top:10px; letter-spacing:2px; color:var(--neon-cyan);">BAƒûLAN</div>
                <div id="cps-meter" style="position: absolute; bottom: 30px; font-size: 0.7rem; color: #666;">READY</div>
            </div>

            <div style="width: 80%; margin-top: 30px;">
                <div style="display:flex; justify-content:space-between; font-size:0.8rem; font-weight:bold;">
                    <span style="color:var(--neon-green)">VERƒ∞ AKTARIMI</span>
                    <span id="breach-val">0%</span>
                </div>
                <div class="progress-bar" style="border-color:var(--neon-green);">
                    <div class="fill" id="breach-bar" style="background:var(--neon-green); box-shadow:0 0 10px var(--neon-green);"></div>
                </div>

                <div style="display:flex; justify-content:space-between; font-size:0.8rem; font-weight:bold; margin-top:15px;">
                    <span style="color:var(--neon-pink)">TESPƒ∞T Rƒ∞SKƒ∞</span>
                    <span id="risk-val">0%</span>
                </div>
                <div class="progress-bar" style="border-color:var(--neon-pink);">
                    <div class="fill" id="risk-bar" style="background:var(--neon-pink); box-shadow:0 0 10px var(--neon-pink);"></div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h2>KARABORSA <span id="passive-val" style="font-size:0.7rem;">0/sn</span></h2>
            <div id="shop-list" style="overflow-y: auto; height: 100%;">
                
                <div class="upgrade" id="btn-cpu" onclick="game.buy('cpu')">
                    <div class="up-icon">‚ö°</div>
                    <div class="up-info"><div class="up-name">CPU Overclock</div><div class="up-desc">Aktif hack hƒ±zƒ±nƒ± arttƒ±rƒ±r.</div></div>
                    <div class="up-cost" id="cost-cpu">50</div>
                </div>

                <div class="upgrade" id="btn-neural" onclick="game.buy('neural')">
                    <div class="up-icon">üß†</div>
                    <div class="up-info"><div class="up-name">Sinirsel Aƒü</div><div class="up-desc">Tƒ±klama g√ºc√º x2.</div></div>
                    <div class="up-cost" id="cost-neural">500</div>
                </div>

                <div class="upgrade" id="btn-bot" onclick="game.buy('bot')">
                    <div class="up-icon">ü§ñ</div>
                    <div class="up-info"><div class="up-name">Botnet V1</div><div class="up-desc">Otomatik sƒ±zma saƒülar.</div></div>
                    <div class="up-cost" id="cost-bot">250</div>
                </div>

                <div class="upgrade" id="btn-mine" onclick="game.buy('mine')">
                    <div class="up-icon">‚õèÔ∏è</div>
                    <div class="up-info"><div class="up-name">Kripto Rig</div><div class="up-desc">Pasif gelir √ºretir.</div></div>
                    <div class="up-cost" id="cost-mine">600</div>
                </div>

                <div class="upgrade" id="btn-server" onclick="game.buy('server')">
                    <div class="up-icon">‚¨õ</div>
                    <div class="up-info"><div class="up-name">Kuantum Sunucu</div><div class="up-desc">Devasa pasif gelir.</div></div>
                    <div class="up-cost" id="cost-server">5000</div>
                </div>

                <div class="upgrade" id="btn-cool" onclick="game.buy('cool')">
                    <div class="up-icon">‚ùÑÔ∏è</div>
                    <div class="up-info"><div class="up-name">Sƒ±vƒ± Soƒüutma</div><div class="up-desc">Risk d√º≈ü√º≈ü√ºn√º hƒ±zlandƒ±rƒ±r.</div></div>
                    <div class="up-cost" id="cost-cool">200</div>
                </div>

                <div class="upgrade" id="btn-stealth" onclick="game.buy('stealth')">
                    <div class="up-icon">üëª</div>
                    <div class="up-info"><div class="up-name">Hayalet VPN</div><div class="up-desc">Tespit edilmeyi zorla≈ütƒ±rƒ±r.</div></div>
                    <div class="up-cost" id="cost-stealth">400</div>
                </div>

            </div>
        </div>
    </div>

    <script>
        /* --- SES Sƒ∞STEMƒ∞ (GLITCH & AMBIENCE) --- */
        class AudioSystem {
            constructor() {
                this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                this.isMuted = true;
                this.drone = null;
            }

            toggle() {
                if(this.ctx.state === 'suspended') this.ctx.resume();
                this.isMuted = !this.isMuted;
                const btn = document.getElementById('music-btn');
                
                if(!this.isMuted) {
                    this.startDrone();
                    btn.innerText = "SES: A√áIK";
                    btn.style.borderColor = "var(--neon-green)";
                    btn.style.color = "var(--neon-green)";
                } else {
                    if(this.drone) this.drone.stop();
                    btn.innerText = "SES: KAPALI";
                    btn.style.borderColor = "var(--neon-cyan)";
                    btn.style.color = "var(--neon-cyan)";
                }
            }

            startDrone() {
                // Karanlƒ±k Cyberpunk Ambiyans
                const osc = this.ctx.createOscillator();
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(50, this.ctx.currentTime);
                
                const filter = this.ctx.createBiquadFilter();
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(200, this.ctx.currentTime);

                // LFO Efekti
                const lfo = this.ctx.createOscillator();
                lfo.frequency.value = 0.1;
                const lfoGain = this.ctx.createGain();
                lfoGain.gain.value = 100;
                lfo.connect(lfoGain);
                lfoGain.connect(filter.frequency);
                lfo.start();

                const gain = this.ctx.createGain();
                gain.gain.value = 0.1;

                osc.connect(filter);
                filter.connect(gain);
                gain.connect(this.ctx.destination);
                osc.start();
                this.drone = osc;
            }

            sfx(type) {
                if(this.isMuted) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                const t = this.ctx.currentTime;

                if (type === 'click') {
                    osc.frequency.setValueAtTime(800, t);
                    osc.frequency.exponentialRampToValueAtTime(100, t + 0.1);
                    gain.gain.setValueAtTime(0.1, t);
                    gain.gain.linearRampToValueAtTime(0, t + 0.1);
                    osc.start(t); osc.stop(t + 0.1);
                } else if (type === 'cash') {
                    osc.type = 'square';
                    osc.frequency.setValueAtTime(1000, t);
                    osc.frequency.linearRampToValueAtTime(2000, t + 0.1);
                    gain.gain.setValueAtTime(0.1, t);
                    gain.gain.linearRampToValueAtTime(0, t + 0.3);
                    osc.start(t); osc.stop(t + 0.3);
                } else if (type === 'crash') {
                    // White Noise for Crash
                    const bufferSize = this.ctx.sampleRate * 2; 
                    const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);
                    const data = buffer.getChannelData(0);
                    for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
                    const noise = this.ctx.createBufferSource();
                    noise.buffer = buffer;
                    noise.connect(gain);
                    gain.connect(this.ctx.destination);
                    gain.gain.setValueAtTime(0.5, t);
                    gain.gain.exponentialRampToValueAtTime(0.01, t + 1);
                    noise.start(t);
                    return; 
                }

                osc.connect(gain);
                gain.connect(this.ctx.destination);
            }
        }

        /* --- OYUN VERƒ∞Sƒ∞ --- */
        const TARGETS = [
            { id: 0, name: "Ev Aƒüƒ±", hp: 100, sec: 1.0, reward: 50, lvl: 1 },
            { id: 1, name: "Kafe Wi-Fi", hp: 300, sec: 1.5, reward: 150, lvl: 2 },
            { id: 2, name: "ATM Terminali", hp: 800, sec: 2.0, reward: 400, lvl: 3 },
            { id: 3, name: "Kurumsal Server", hp: 2000, sec: 3.5, reward: 1200, lvl: 5 },
            { id: 4, name: "≈ûehir G√º√ß ≈ûebekesi", hp: 5000, sec: 5.0, reward: 3000, lvl: 8 },
            { id: 5, name: "Merkez Bankasƒ±", hp: 15000, sec: 8.0, reward: 10000, lvl: 10 }
        ];

        class Game {
            constructor() {
                this.audio = new AudioSystem();
                this.money = 100;
                this.currentXP = 0;
                this.targetXP = 100;
                this.level = 1;
                this.startTime = Date.now();
                this.timeMulti = 1.0;
                
                this.stats = {
                    clickPower: 2,
                    riskCool: 2.0,
                    autoHack: 0,
                    passive: 0,
                    stealth: 1.0
                };

                this.upgrades = { cpu:1, neural:0, bot:0, mine:0, server:0, cool:1, stealth:1 };
                
                this.targetId = 0;
                this.breach = 0;
                this.risk = 0;
                this.isCrashed = false;
                this.clicks = [];

                this.init();
            }

            init() {
                this.renderTargets();
                this.updatePrices();
                
                // Ana D√∂ng√º
                setInterval(() => this.loop(), 1000/60);
                
                // Zamanlayƒ±cƒ±lar
                setInterval(() => this.updateTimer(), 1000);
                setInterval(() => {
                    if(!this.isCrashed) {
                        this.timeMulti += 0.1;
                        document.getElementById('time-multi').innerText = "x" + this.timeMulti.toFixed(1);
                    }
                }, 10000);
            }

            renderTargets() {
                const list = document.getElementById('target-list');
                list.innerHTML = "";
                TARGETS.forEach(t => {
                    const el = document.createElement('div');
                    el.className = `target-item ${this.level < t.lvl ? 'locked' : ''} ${this.targetId === t.id ? 'active' : ''}`;
                    el.innerHTML = `
                        <div class="t-name">${t.name}</div>
                        <div class="t-info"><span>G√úVENLƒ∞K: x${t.sec}</span></div>
                    `;
                    el.onclick = () => { if(this.level >= t.lvl) this.setTarget(t.id); };
                    list.appendChild(el);
                });
            }

            setTarget(id) {
                this.targetId = id;
                this.breach = 0;
                this.risk = 0;
                this.renderTargets();
                this.log(`HEDEF DEƒûƒ∞≈ûTƒ∞Rƒ∞LDƒ∞: ${TARGETS[id].name}`);
            }

            updateTimer() {
                const diff = Math.floor((Date.now() - this.startTime) / 1000);
                const h = Math.floor(diff / 3600).toString().padStart(2,'0');
                const m = Math.floor((diff % 3600) / 60).toString().padStart(2,'0');
                const s = (diff % 60).toString().padStart(2,'0');
                document.getElementById('uptime-display').innerText = `${h}:${m}:${s}`;
            }

            hack(e) {
                if (this.isCrashed) return;

                // CPS Hesaplama
                const now = Date.now();
                this.clicks.push(now);
                this.clicks = this.clicks.filter(t => now - t < 1000);
                const cps = this.clicks.length;
                document.getElementById('cps-meter').innerText = cps + " CPS";

                const t = TARGETS[this.targetId];
                
                // Sƒ±zma
                this.breach += this.stats.clickPower;
                
                // Risk (Hƒ±z Cezasƒ±)
                let speedPenalty = (cps * cps) / 12; 
                let addedRisk = (t.sec + speedPenalty) / this.stats.stealth;
                this.risk += addedRisk;

                // Efektler
                this.audio.sfx('click');
                this.spawnParticles(e.clientX, e.clientY);

                // Buton Animasyonu
                const btn = document.getElementById('hack-btn');
                btn.style.transform = "scale(0.95)";
                setTimeout(() => btn.style.transform = "scale(1)", 50);

                this.checkState();
            }

            loop() {
                if(this.isCrashed) return;

                // Pasif Gelir
                if(this.stats.passive > 0) this.money += (this.stats.passive / 60) * this.timeMulti;
                
                // Auto Hack
                if(this.stats.autoHack > 0) this.breach += this.stats.autoHack / 60;

                // Risk Soƒüutma
                if(this.risk > 0) {
                    this.risk -= this.stats.riskCool / 60;
                    if(this.risk < 0) this.risk = 0;
                }

                // UI G√ºncelleme
                document.getElementById('money-display').innerText = Math.floor(this.money).toLocaleString() + " ‚Çø";
                document.getElementById('passive-val').innerText = (this.stats.passive * this.timeMulti).toFixed(1) + "/sn";

                const t = TARGETS[this.targetId];
                const bPct = Math.min(100, (this.breach / t.hp) * 100);
                document.getElementById('breach-bar').style.width = bPct + "%";
                document.getElementById('breach-val').innerText = Math.floor(bPct) + "%";

                document.getElementById('risk-bar').style.width = Math.min(100, this.risk) + "%";
                document.getElementById('risk-val').innerText = Math.floor(this.risk) + "%";

                // XP Bar
                const xpPct = (this.currentXP / this.targetXP) * 100;
                document.getElementById('xp-fill').style.width = xpPct + "%";

                // Glitch & Tehlike Efektleri
                const btn = document.getElementById('hack-btn');
                const body = document.body;
                
                if (this.risk > 50) {
                    // Risk %50 √ºst√ºndeyse hafif glitch ba≈ülar
                    if(Math.random() > 0.95) body.classList.add('glitch-effect');
                    else body.classList.remove('glitch-effect');
                } else {
                    body.classList.remove('glitch-effect');
                }

                if (this.risk > 80) btn.classList.add('danger');
                else btn.classList.remove('danger');

                this.checkState();
                this.updateButtons();
            }

            checkState() {
                const t = TARGETS[this.targetId];

                // Ba≈üarƒ±lƒ± Hack
                if (this.breach >= t.hp) {
                    this.breach = 0;
                    
                    // √ñD√úL HESAPLAMA (D√ºzeltildi ve Arttƒ±rƒ±ldƒ±)
                    let baseReward = t.reward;
                    let finalReward = Math.floor(baseReward * this.timeMulti);
                    
                    this.money += finalReward;
                    
                    // XP ve Level
                    this.currentXP += t.lvl * 10;
                    if(this.currentXP >= this.targetXP) {
                        this.level++;
                        this.currentXP = 0;
                        this.targetXP = Math.floor(this.targetXP * 1.5);
                        document.getElementById('lvl-display').innerText = this.level;
                        this.log(`SEVƒ∞YE ATLADINIZ! YENƒ∞ SEVƒ∞YE: ${this.level}`);
                        this.renderTargets();
                    }

                    this.audio.sfx('cash');
                    this.spawnFloatText(`+${finalReward} ‚Çø`, '#ffcc00');
                    this.log(`BAƒûLANTI BA≈ûARILI: ${finalReward} ‚Çø AKTARILDI`);
                }

                // Sƒ∞STEM √á√ñKMESƒ∞
                if (this.risk >= 100) {
                    this.risk = 100;
                    this.crashSystem();
                }
            }

            crashSystem() {
                if(this.isCrashed) return;
                this.isCrashed = true;
                this.audio.sfx('crash');

                // Ekranƒ± gizle / √á√∂kme Ekranƒ±nƒ± A√ß
                const overlay = document.getElementById('crash-overlay');
                overlay.style.display = 'flex';
                document.getElementById('boot-sequence').innerHTML = "";
                
                // Zaman √áarpanƒ± Cezasƒ±
                this.timeMulti = 1.0;
                document.getElementById('time-multi').innerText = "x1.0";

                // Boot Sequence Animasyonu
                const logs = [
                    "CRITICAL ERROR: KERNEL PANIC",
                    "DUMPING PHYSICAL MEMORY...",
                    "RISK LEVEL CRITICAL",
                    "INITIATING SAFE MODE...",
                    "RELOADING DRIVERS...",
                    "RECONNECTING TO NETWORK...",
                    "SYSTEM RECOVERED."
                ];

                let i = 0;
                const interval = setInterval(() => {
                    if(i < logs.length) {
                        const div = document.createElement('div');
                        div.className = 'boot-text';
                        div.innerText = "> " + logs[i];
                        document.getElementById('boot-sequence').appendChild(div);
                        this.audio.sfx('click'); // Daktilo sesi gibi
                        i++;
                    } else {
                        clearInterval(interval);
                        setTimeout(() => {
                            overlay.style.display = 'none';
                            this.isCrashed = false;
                            this.risk = 50; // %50 Riskle geri d√∂n
                            this.log("Sƒ∞STEM YENƒ∞DEN BA≈ûLATILDI.", "red");
                        }, 1000);
                    }
                }, 600);
            }

            /* --- MARKET --- */
            getCosts() {
                return {
                    cpu: Math.floor(50 * Math.pow(1.4, this.upgrades.cpu)),
                    neural: Math.floor(500 * Math.pow(1.5, this.upgrades.neural)),
                    bot: Math.floor(250 * Math.pow(1.4, this.upgrades.bot)),
                    mine: Math.floor(600 * Math.pow(1.4, this.upgrades.mine)),
                    server: Math.floor(5000 * Math.pow(1.5, this.upgrades.server)),
                    cool: Math.floor(200 * Math.pow(1.5, this.upgrades.cool)),
                    stealth: Math.floor(400 * Math.pow(1.6, this.upgrades.stealth))
                };
            }

            updatePrices() {
                const c = this.getCosts();
                document.getElementById('cost-cpu').innerText = c.cpu;
                document.getElementById('cost-neural').innerText = c.neural;
                document.getElementById('cost-bot').innerText = c.bot;
                document.getElementById('cost-mine').innerText = c.mine;
                document.getElementById('cost-server').innerText = c.server;
                document.getElementById('cost-cool').innerText = c.cool;
                document.getElementById('cost-stealth').innerText = c.stealth;
            }

            buy(type) {
                const cost = this.getCosts()[type];
                if (this.money >= cost) {
                    this.money -= cost;
                    this.upgrades[type]++;
                    this.audio.sfx('click');

                    if(type === 'cpu') this.stats.clickPower += 2;
                    if(type === 'neural') this.stats.clickPower *= 2; // G√º√ßl√º Upgrade
                    if(type === 'bot') this.stats.autoHack += 5;
                    if(type === 'mine') this.stats.passive += 10;
                    if(type === 'server') this.stats.passive += 150;
                    if(type === 'cool') this.stats.riskCool += 1.0;
                    if(type === 'stealth') this.stats.stealth += 0.3;

                    this.updatePrices();
                    this.log("Y√úKSELTME SATIN ALINDI.");
                } else {
                    this.audio.sfx('crash'); // Hata sesi
                }
            }

            updateButtons() {
                const c = this.getCosts();
                const check = (id, cost) => {
                    const btn = document.getElementById(id);
                    if(this.money >= cost) {
                        btn.classList.remove('disabled');
                        btn.style.borderColor = 'var(--neon-gold)';
                    } else {
                        btn.classList.add('disabled');
                        btn.style.borderColor = '#333';
                    }
                }
                check('btn-cpu', c.cpu);
                check('btn-neural', c.neural);
                check('btn-bot', c.bot);
                check('btn-mine', c.mine);
                check('btn-server', c.server);
                check('btn-cool', c.cool);
                check('btn-stealth', c.stealth);
            }

            /* --- HELPER --- */
            log(msg, color="#00ff66") {
                const con = document.getElementById('console-log');
                const line = document.createElement('div');
                line.className = 'log-line';
                line.style.borderColor = color;
                line.style.color = color;
                line.innerText = `> ${msg}`;
                con.prepend(line);
                if(con.children.length > 20) con.lastChild.remove();
            }

            spawnFloatText(text, color) {
                const btn = document.getElementById('hack-btn');
                const rect = btn.getBoundingClientRect();
                const el = document.createElement('div');
                el.className = 'floating-text';
                el.innerText = text;
                el.style.left = (rect.left + rect.width/2 - 20) + "px";
                el.style.top = (rect.top) + "px";
                el.style.color = color;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 800);
            }

            spawnParticles(x, y) {
                for(let i=0; i<6; i++) {
                    const p = document.createElement('div');
                    p.style.position = 'absolute';
                    p.style.left = x + 'px';
                    p.style.top = y + 'px';
                    p.style.width = '4px';
                    p.style.height = '4px';
                    p.style.background = 'var(--neon-cyan)';
                    p.style.pointerEvents = 'none';
                    p.style.transition = '0.5s';
                    p.style.zIndex = '99';
                    document.body.appendChild(p);
                    
                    setTimeout(() => {
                        p.style.transform = `translate(${(Math.random()-0.5)*100}px, ${(Math.random()-0.5)*100}px)`;
                        p.style.opacity = 0;
                    }, 10);
                    setTimeout(() => p.remove(), 500);
                }
            }

            toggleAudio() { this.audio.toggle(); }
        }

        const game = new Game();

    </script>
</body>
</html>
