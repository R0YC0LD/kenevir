<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CYBER BREACH: NEURO LINK [V9.0]</title>
    <style>
        /* --- 1. CORE VISUALS & RESET --- */
        :root {
            --bg-color: #020202;
            --glass-panel: rgba(10, 15, 20, 0.92);
            --border-color: #1a2a3a;
            
            --c-cyan: #00f3ff;
            --c-pink: #ff0055;
            --c-gold: #ffcc00;
            --c-green: #00ff66;
            --c-purple: #bc13fe;
            --c-danger: #ff2a2a;

            --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --font-mono: 'Courier New', monospace;
        }

        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; cursor: default; outline: none; }
        ::-webkit-scrollbar { width: 6px; background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--c-cyan); }

        body {
            margin: 0; background-color: var(--bg-color); color: #fff;
            font-family: var(--font-main); height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* --- 2. BACKGROUND & FX --- */
        #bg-canvas { position: fixed; top:0; left:0; width:100%; height:100%; z-index:-1; opacity: 0.4; }
        
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 900;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px; opacity: 0.6;
        }
        
        .crt-flicker { animation: flicker 0.15s infinite; pointer-events: none; position: fixed; inset: 0; z-index: 901; opacity: 0.03; background: white; display: none; }
        @keyframes flicker { 0% { opacity: 0.02; } 50% { opacity: 0.05; } 100% { opacity: 0.02; } }

        /* --- 3. UI LAYOUT --- */
        #app {
            display: grid; grid-template-columns: 300px 1fr 350px; gap: 15px;
            width: 98vw; height: 96vh; max-width: 1920px; position: relative; z-index: 10;
        }

        .panel {
            background: var(--glass-panel); border: 1px solid var(--border-color);
            border-radius: 4px; display: flex; flex-direction: column; overflow: hidden;
            box-shadow: 0 0 20px rgba(0,0,0,0.8); backdrop-filter: blur(8px);
            position: relative; transition: border-color 0.3s;
        }
        .panel:hover { border-color: rgba(0, 243, 255, 0.3); }
        
        .p-header {
            padding: 12px 15px; background: rgba(0,0,0,0.4); border-bottom: 1px solid var(--border-color);
            font-family: var(--font-mono); font-size: 0.85rem; letter-spacing: 1px; color: var(--c-cyan);
            display: flex; justify-content: space-between; align-items: center; text-transform: uppercase;
        }
        .p-content { flex-grow: 1; overflow-y: auto; padding: 10px; position: relative; }

        /* --- 4. LEFT PANEL: TARGETS & STATS --- */
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.8rem; border-bottom: 1px dashed #333; padding-bottom: 4px; }
        .stat-label { color: #889; }
        .stat-val { font-family: var(--font-mono); font-weight: bold; color: #fff; }
        
        .target-card {
            background: rgba(255,255,255,0.03); border: 1px solid #333; padding: 12px;
            margin-bottom: 8px; cursor: pointer; transition: all 0.2s; position: relative;
            overflow: hidden;
        }
        .target-card:hover { background: rgba(0, 243, 255, 0.05); border-color: var(--c-cyan); transform: translateX(5px); }
        .target-card.locked { opacity: 0.4; filter: grayscale(1); pointer-events: none; }
        .target-card.active { border-color: var(--c-green); box-shadow: inset 3px 0 0 var(--c-green); background: rgba(0, 255, 102, 0.05); }
        
        .t-name { font-weight: bold; font-size: 0.95rem; color: #eee; }
        .t-meta { display: flex; justify-content: space-between; font-size: 0.75rem; color: #aaa; margin-top: 5px; font-family: var(--font-mono); }

        /* --- 5. CENTER PANEL: THE DECK --- */
        #deck-view { display: flex; flex-direction: column; height: 100%; align-items: center; justify-content: center; position: relative; }
        
        /* Top HUD */
        .hud-grid {
            position: absolute; top: 0; left: 0; width: 100%; padding: 20px;
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; text-align: center;
        }
        .hud-box { background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; border: 1px solid #333; }
        .hud-title { font-size: 0.7rem; color: #888; letter-spacing: 1px; margin-bottom: 2px; }
        .hud-number { font-family: var(--font-mono); font-size: 1.2rem; font-weight: bold; }

        /* The Core (Hack Button) */
        #neural-core {
            width: 260px; height: 260px; border-radius: 50%;
            border: 2px solid var(--c-cyan);
            background: radial-gradient(circle, rgba(0, 243, 255, 0.05) 0%, rgba(0,0,0,0.95) 70%);
            box-shadow: 0 0 40px rgba(0, 243, 255, 0.15), inset 0 0 20px rgba(0, 243, 255, 0.1);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; transition: transform 0.05s, box-shadow 0.2s;
            position: relative; z-index: 20;
        }
        #neural-core:hover { box-shadow: 0 0 60px rgba(0, 243, 255, 0.3); border-color: #fff; }
        #neural-core:active { transform: scale(0.96); }
        #neural-core.overheat { border-color: var(--c-danger); box-shadow: 0 0 50px var(--c-danger); animation: shake 0.3s infinite; }
        
        .core-icon { font-size: 4rem; margin-bottom: 5px; filter: drop-shadow(0 0 10px var(--c-cyan)); pointer-events: none; }
        .core-label { font-family: var(--font-mono); font-size: 0.8rem; letter-spacing: 3px; color: var(--c-cyan); pointer-events: none; }

        /* Heat & Risk Bars */
        .bars-container { width: 450px; margin-top: 40px; position: relative; }
        .bar-wrap { margin-bottom: 15px; }
        .bar-header { display: flex; justify-content: space-between; font-size: 0.75rem; margin-bottom: 4px; font-weight: bold; text-transform: uppercase; }
        .bar-track { height: 8px; background: #111; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
        .bar-fill { height: 100%; width: 0%; transition: width 0.1s linear; }

        /* Skills (Programs) */
        .skills-rack {
            display: flex; gap: 15px; margin-top: 30px;
        }
        .skill-slot {
            width: 70px; height: 70px; background: #0e1218; border: 1px solid #333;
            border-radius: 6px; display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.2s; position: relative; overflow: hidden;
        }
        .skill-slot:hover { border-color: var(--c-gold); background: rgba(255, 204, 0, 0.05); }
        .skill-slot.cooldown { opacity: 0.5; cursor: not-allowed; border-color: var(--c-danger); }
        .skill-key { position: absolute; top: 2px; left: 4px; font-size: 0.6rem; color: #666; font-family: var(--font-mono); }
        .skill-icon { font-size: 1.5rem; margin-bottom: 2px; }
        .skill-name { font-size: 0.6rem; color: #aaa; text-align: center; line-height: 1; }
        .skill-overlay { position: absolute; bottom: 0; left: 0; width: 100%; height: 0%; background: rgba(255,0,0,0.3); transition: height 0.1s linear; }

        /* --- 6. RIGHT PANEL: MARKET & LOGS --- */
        .tab-nav { display: flex; border-bottom: 1px solid #333; margin-bottom: 10px; }
        .tab-btn {
            flex-grow: 1; padding: 10px; text-align: center; cursor: pointer; font-size: 0.8rem;
            background: rgba(0,0,0,0.2); color: #888; transition: 0.2s;
        }
        .tab-btn.active { background: rgba(0, 243, 255, 0.1); color: var(--c-cyan); border-bottom: 2px solid var(--c-cyan); }

        .shop-item {
            display: flex; align-items: center; padding: 12px; border: 1px solid #333;
            background: rgba(255,255,255,0.02); margin-bottom: 8px; cursor: pointer; transition: 0.2s;
        }
        .shop-item:hover { border-color: var(--c-gold); }
        .shop-item.disabled { opacity: 0.4; pointer-events: none; filter: grayscale(1); }
        
        .item-icon { width: 40px; height: 40px; background: #000; border: 1px solid #333; display: flex; justify-content: center; align-items: center; font-size: 1.2rem; margin-right: 12px; }
        .item-details { flex-grow: 1; }
        .item-title { font-size: 0.85rem; font-weight: bold; color: #eee; }
        .item-desc { font-size: 0.7rem; color: #777; margin-top: 2px; }
        .item-price { font-family: var(--font-mono); color: var(--c-gold); font-size: 0.85rem; font-weight: bold; }

        #console-log {
            height: 100%; overflow-y: auto; font-family: 'Consolas', monospace; font-size: 0.75rem;
            display: flex; flex-direction: column-reverse; padding: 5px;
        }
        .log-entry { margin-bottom: 4px; padding-left: 8px; border-left: 2px solid #333; opacity: 0; animation: fadeIn 0.3s forwards; }
        .log-info { border-color: var(--c-cyan); color: #ccc; }
        .log-warn { border-color: var(--c-gold); color: var(--c-gold); }
        .log-err { border-color: var(--c-danger); color: var(--c-danger); }
        .log-success { border-color: var(--c-green); color: var(--c-green); }

        /* --- 7. OVERLAYS & MODALS --- */
        #boot-screen {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            font-family: var(--font-mono);
        }
        .boot-text { color: var(--c-cyan); margin-bottom: 10px; text-shadow: 0 0 10px var(--c-cyan); }
        
        #game-over-modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 5000;
            display: none; align-items: center; justify-content: center; flex-direction: column;
        }
        .glitch-text { font-size: 4rem; font-weight: 900; color: var(--c-danger); text-shadow: 2px 2px var(--c-cyan); animation: shake 0.5s infinite; }
        
        .start-btn {
            margin-top: 30px; padding: 15px 50px; background: transparent; border: 2px solid var(--c-cyan);
            color: var(--c-cyan); font-size: 1.2rem; cursor: pointer; transition: 0.3s; font-family: var(--font-mono);
            font-weight: bold; letter-spacing: 2px;
        }
        .start-btn:hover { background: var(--c-cyan); color: #000; box-shadow: 0 0 30px var(--c-cyan); }

        /* --- ANIMATIONS --- */
        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes shake { 0% { transform: translate(1px, 1px) } 25% { transform: translate(-2px, -2px) } 75% { transform: translate(-1px, 2px) } }
        
        .float-txt {
            position: absolute; font-weight: bold; font-family: var(--font-mono); pointer-events: none;
            animation: floatUp 1s forwards; z-index: 1000; text-shadow: 0 0 5px black;
        }
        @keyframes floatUp { 0% { opacity:1; transform:translateY(0) scale(1); } 100% { opacity:0; transform:translateY(-60px) scale(1.2); } }

        /* Mobile Adjustments */
        @media (max-width: 1100px) {
            #app { grid-template-columns: 1fr; grid-template-rows: auto 1fr auto; display: block; overflow-y: auto; }
            .panel { margin-bottom: 15px; height: auto; min-height: 300px; }
            #neural-core { width: 200px; height: 200px; }
            .bars-container { width: 90%; }
        }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>
    <div class="scanlines"></div>
    <div class="crt-flicker"></div>

    <div id="boot-screen">
        <div style="font-size: 3rem; font-weight: bold; color: #fff; margin-bottom: 20px;">NEURO_LINK v9.0</div>
        <div id="boot-log" style="color: #666; font-size: 0.9rem; margin-bottom: 30px; height: 100px; overflow: hidden; width: 400px; text-align: left;"></div>
        <button class="start-btn" onclick="Game.bootSequence()">BAƒûLANTIYI KUR</button>
    </div>

    <div id="game-over-modal">
        <div class="glitch-text">Sƒ∞STEM √á√ñKT√ú</div>
        <div style="margin-top: 20px; font-family: var(--font-mono); color: #fff;">
            TOPLAM VERƒ∞: <span id="end-data" style="color:var(--c-cyan)">0</span> TB<br>
            TOPLAM KAZAN√á: <span id="end-money" style="color:var(--c-gold)">0</span> ‚Çø
        </div>
        <button class="start-btn" onclick="location.reload()">YENƒ∞DEN BA≈ûLAT</button>
    </div>

    <div id="app" style="opacity: 0; transition: opacity 1s;">
        
        <div class="panel">
            <div class="p-header">
                <span>Aƒû HARƒ∞TASI</span>
                <span>SEVƒ∞YE <span id="lvl-disp">1</span></span>
            </div>
            <div class="p-content" id="target-list">
                </div>
            <div style="padding: 10px; border-top: 1px solid #333; background: rgba(0,0,0,0.5);">
                <div class="stat-row"><span class="stat-label">ƒ∞≈ûLEMCƒ∞ G√úC√ú</span><span class="stat-val" id="stat-power">0 GHz</span></div>
                <div class="stat-row"><span class="stat-label">RAM KAPASƒ∞TESƒ∞</span><span class="stat-val" id="stat-ram">0 GB</span></div>
                <div class="stat-row"><span class="stat-label">SOƒûUTMA</span><span class="stat-val" id="stat-cool">0 T/s</span></div>
            </div>
        </div>

        <div class="panel" style="border:none; background:transparent; box-shadow:none;">
            <div id="deck-view">
                
                <div class="hud-grid">
                    <div class="hud-box">
                        <div class="hud-title">BAKƒ∞YE</div>
                        <div class="hud-number" style="color:var(--c-gold)"><span id="money-disp">0</span> ‚Çø</div>
                    </div>
                    <div class="hud-box">
                        <div class="hud-title">VERƒ∞</div>
                        <div class="hud-number" style="color:var(--c-cyan)"><span id="data-disp">0</span> TB</div>
                    </div>
                    <div class="hud-box">
                        <div class="hud-title">√áARPAN</div>
                        <div class="hud-number" style="color:var(--c-green)">x<span id="multi-disp">1.0</span></div>
                    </div>
                </div>

                <div id="neural-core" onmousedown="Game.hack(event)">
                    <div class="core-icon">üß†</div>
                    <div class="core-label">NEURAL INTERFACE</div>
                </div>

                <div class="bars-container">
                    <div class="bar-wrap">
                        <div class="bar-header">
                            <span style="color:var(--c-cyan)">SIZMA (<span id="breach-val">0</span>%)</span>
                        </div>
                        <div class="bar-track"><div id="bar-breach" class="bar-fill" style="background:var(--c-cyan); box-shadow:0 0 10px var(--c-cyan);"></div></div>
                    </div>
                    
                    <div class="bar-wrap">
                        <div class="bar-header">
                            <span style="color:var(--c-danger)">Aƒû G√úR√úLT√úS√ú / Rƒ∞SK (<span id="risk-val">0</span>%)</span>
                        </div>
                        <div class="bar-track"><div id="bar-risk" class="bar-fill" style="background:var(--c-danger);"></div></div>
                    </div>

                    <div class="bar-wrap">
                        <div class="bar-header">
                            <span style="color:var(--c-purple)">CPU ISISI (<span id="heat-val">0</span>%)</span>
                        </div>
                        <div class="bar-track"><div id="bar-heat" class="bar-fill" style="background:var(--c-purple);"></div></div>
                    </div>
                </div>

                <div class="skills-rack">
                    <div class="skill-slot" id="skill-q" onclick="Game.useSkill('brute')">
                        <div class="skill-key">Q</div>
                        <div class="skill-icon">‚ö°</div>
                        <div class="skill-name">BRUTE FORCE</div>
                        <div class="skill-overlay" id="cd-q"></div>
                    </div>
                    <div class="skill-slot" id="skill-w" onclick="Game.useSkill('worm')">
                        <div class="skill-key">W</div>
                        <div class="skill-icon">ü¶†</div>
                        <div class="skill-name">DATA WORM</div>
                        <div class="skill-overlay" id="cd-w"></div>
                    </div>
                    <div class="skill-slot" id="skill-e" onclick="Game.useSkill('ghost')">
                        <div class="skill-key">E</div>
                        <div class="skill-icon">üëª</div>
                        <div class="skill-name">GHOST VPN</div>
                        <div class="skill-overlay" id="cd-e"></div>
                    </div>
                    <div class="skill-slot" id="skill-r" onclick="Game.useSkill('flush')">
                        <div class="skill-key">R</div>
                        <div class="skill-icon">‚ùÑÔ∏è</div>
                        <div class="skill-name">COOLANT</div>
                        <div class="skill-overlay" id="cd-r"></div>
                    </div>
                </div>

            </div>
        </div>

        <div class="panel">
            <div class="p-header">
                <div class="tab-nav" style="margin:0; border:none; width:100%;">
                    <div class="tab-btn active" onclick="UI.switchTab('market')">MARKET</div>
                    <div class="tab-btn" onclick="UI.switchTab('logs')">KONSOL</div>
                </div>
            </div>
            
            <div class="p-content" id="tab-market">
                </div>
            
            <div class="p-content" id="tab-logs" style="display:none; background:#000;">
                <div id="console-log"></div>
            </div>
        </div>

    </div>

    <script>
        /* --- 1. CONFIG & DATA --- */
        const CONFIG = {
            fps: 60,
            heatDecay: 0.2, // Passive cooling
            riskDecay: 0.05, // Passive stealth
            baseMulti: 1.0,
            multiInc: 0.1, // Multiplier increase per 10s
            maxHeat: 100,
            maxRisk: 100
        };

        const TARGETS = [
            { id: 0, name: "Localhost:8080", sec: 1.0, hp: 200, reward: 50, req: 1, type: "PERSONAL" },
            { id: 1, name: "StarBux_WiFi", sec: 1.5, hp: 600, reward: 120, req: 2, type: "PUBLIC" },
            { id: 2, name: "Metro_Grid_v4", sec: 2.2, hp: 1500, reward: 350, req: 3, type: "INFRA" },
            { id: 3, name: "Corp_Data_Center", sec: 3.5, hp: 4000, reward: 1000, req: 5, type: "CORP" },
            { id: 4, name: "Gov_Black_Box", sec: 5.0, hp: 10000, reward: 3000, req: 8, type: "GOV" },
            { id: 5, name: "Orbital_Sat_Link", sec: 8.0, hp: 25000, reward: 10000, req: 12, type: "MILITARY" },
            { id: 6, name: "AI_SINGULARITY", sec: 12.0, hp: 100000, reward: 50000, req: 20, type: "GOD" }
        ];

        const UPGRADES = [
            { id: 'cpu', name: 'Quantum CPU', desc: 'Click Power +2', cost: 100, mult: 1.5, type: 'hardware', icon: 'üíé' },
            { id: 'ram', name: 'Expanded RAM', desc: 'Cooldown Reduction', cost: 300, mult: 1.6, type: 'hardware', icon: 'üíæ' },
            { id: 'cool', name: 'Liquid Nitro', desc: 'Passive Cooling ++', cost: 200, mult: 1.5, type: 'hardware', icon: '‚ùÑÔ∏è' },
            { id: 'bot', name: 'Spider Bot', desc: 'Auto Hack / sec', cost: 500, mult: 1.4, type: 'software', icon: 'üï∑Ô∏è' },
            { id: 'mine', name: 'Crypto Miner', desc: 'Passive Income', cost: 800, mult: 1.4, type: 'software', icon: '‚õèÔ∏è' }
        ];

        /* --- 2. AUDIO ENGINE (Synthesizer) --- */
        class AudioController {
            constructor() {
                this.ctx = null;
                this.muted = false;
            }
            init() {
                if(!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)();
            }
            playTone(freq, type, dur, vol=0.1, slide=0) {
                if(!this.ctx || this.muted) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
                if(slide) osc.frequency.linearRampToValueAtTime(freq+slide, this.ctx.currentTime+dur);
                
                gain.gain.setValueAtTime(vol, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + dur);
                
                osc.connect(gain); gain.connect(this.ctx.destination);
                osc.start(); osc.stop(this.ctx.currentTime + dur);
            }
            noise(dur) {
                if(!this.ctx || this.muted) return;
                const bSize = this.ctx.sampleRate * dur;
                const buf = this.ctx.createBuffer(1, bSize, this.ctx.sampleRate);
                const data = buf.getChannelData(0);
                for(let i=0; i<bSize; i++) data[i] = Math.random()*2-1;
                
                const src = this.ctx.createBufferSource();
                const gain = this.ctx.createGain();
                src.buffer = buf;
                gain.gain.value = 0.1;
                src.connect(gain); gain.connect(this.ctx.destination);
                src.start();
            }
            // SFX Presets
            click() { this.playTone(800 + Math.random()*200, 'triangle', 0.1, 0.05); }
            error() { this.playTone(150, 'sawtooth', 0.3, 0.2, -50); }
            success() { this.playTone(1200, 'sine', 0.2, 0.1, 500); setTimeout(()=>this.playTone(1800,'square',0.3,0.05),100); }
            skill() { this.playTone(400, 'square', 0.5, 0.1, -200); }
            cool() { this.noise(0.3); }
        }

        /* --- 3. PARTICLE ENGINE (Canvas) --- */
        class ParticleSystem {
            constructor() {
                this.cvs = document.getElementById('bg-canvas');
                this.ctx = this.cvs.getContext('2d');
                this.particles = [];
                this.resize();
                window.addEventListener('resize', () => this.resize());
            }
            resize() {
                this.cvs.width = window.innerWidth;
                this.cvs.height = window.innerHeight;
            }
            spawn(x, y, color, count=5) {
                for(let i=0; i<count; i++) {
                    this.particles.push({
                        x: x, y: y,
                        vx: (Math.random()-0.5) * 10,
                        vy: (Math.random()-0.5) * 10,
                        life: 1.0,
                        color: color,
                        text: Math.random() > 0.5 ? '1' : '0'
                    });
                }
            }
            update() {
                this.ctx.clearRect(0,0,this.cvs.width, this.cvs.height);
                for(let i=this.particles.length-1; i>=0; i--) {
                    let p = this.particles[i];
                    p.x += p.vx; p.y += p.vy;
                    p.life -= 0.02;
                    p.vy += 0.2; // Gravity
                    
                    this.ctx.globalAlpha = p.life;
                    this.ctx.fillStyle = p.color;
                    this.ctx.font = '12px monospace';
                    this.ctx.fillText(p.text, p.x, p.y);
                    
                    if(p.life <= 0) this.particles.splice(i, 1);
                }
            }
        }

        /* --- 4. GAME LOGIC --- */
        const Game = {
            state: {
                active: false,
                money: 0,
                data: 0,
                level: 1,
                targetId: 0,
                breach: 0,
                risk: 0,
                heat: 0,
                multiplier: 1.0,
                xp: 0,
                upgrades: { cpu:0, ram:0, cool:0, bot:0, mine:0 }
            },
            
            stats: { // Derived from upgrades
                power: 5,
                cooling: 0.2, // Passive
                venting: 25,  // Manual flush
                auto: 0,
                passive: 0,
                stealth: 1.0
            },

            cooldowns: { q:0, w:0, e:0, r:0 }, // 0 to 100%
            
            audio: new AudioController(),
            particles: new ParticleSystem(),
            loopId: null,

            // --- INITIALIZATION ---
            bootSequence() {
                const log = document.getElementById('boot-log');
                const lines = [
                    "BIOS CHECK... OK", "LOADING KERNEL... OK", "MOUNTING DRIVES...", 
                    "CONNECTING TO NEURAL LINK...", "ESTABLISHING SECURE TUNNEL...", "SYSTEM READY."
                ];
                let i = 0;
                const int = setInterval(() => {
                    log.innerHTML += `<div>> ${lines[i]}</div>`;
                    log.scrollTop = log.scrollHeight;
                    i++;
                    if(i >= lines.length) {
                        clearInterval(int);
                        setTimeout(this.start.bind(this), 500);
                    }
                }, 300);
            },

            start() {
                this.audio.init();
                document.getElementById('boot-screen').style.display = 'none';
                document.getElementById('app').style.opacity = 1;
                
                this.state.active = true;
                this.state.money = 100; // Starter cash
                this.updateStats();
                UI.renderTargets();
                UI.renderShop();
                UI.log("NEURAL LINK ESTABLISHED.", "log-success");

                // Start Loop
                this.loopId = setInterval(() => this.loop(), 1000/60);
                
                // Keyboard Bindings
                window.addEventListener('keydown', (e) => {
                    if(e.key.toLowerCase() === 'q') this.useSkill('brute');
                    if(e.key.toLowerCase() === 'w') this.useSkill('worm');
                    if(e.key.toLowerCase() === 'e') this.useSkill('ghost');
                    if(e.key.toLowerCase() === 'r') this.useSkill('flush');
                });

                // Multiplier increase
                setInterval(() => {
                    if(this.state.active) {
                        this.state.multiplier += CONFIG.multiInc;
                        UI.log(`Zaman √áarpanƒ± Arttƒ±: x${this.state.multiplier.toFixed(1)}`, "log-info");
                    }
                }, 10000);
            },

            // --- MAIN LOOP ---
            loop() {
                if(!this.state.active) return;
                
                // 1. Passive Logic
                if(this.stats.passive > 0) this.state.money += (this.stats.passive / 60) * this.state.multiplier;
                if(this.stats.auto > 0) {
                    this.state.breach += (this.stats.auto / 60) * this.state.multiplier;
                    // Auto hack generates minor noise/heat
                    this.state.heat += 0.05; 
                    this.state.risk += 0.02;
                }

                // 2. Cooling / Decay
                if(this.state.heat > 0) this.state.heat -= this.stats.cooling;
                if(this.state.heat < 0) this.state.heat = 0;
                
                if(this.state.risk > 0) this.state.risk -= CONFIG.riskDecay * this.stats.stealth;
                if(this.state.risk < 0) this.state.risk = 0;

                // 3. Cooldown Recovery
                for(let k in this.cooldowns) {
                    if(this.cooldowns[k] > 0) this.cooldowns[k] -= 0.5 + (this.state.upgrades.ram * 0.1); // RAM improves CDR
                }

                // 4. Update Visuals
                this.particles.update();
                UI.update();
                this.checkWinCondition();
                
                // 5. Fail Condition
                if(this.state.risk >= 100) this.gameOver("Sƒ∞STEM TARAFINDAN TESPƒ∞T EDƒ∞LDƒ∞Nƒ∞Z.");
                if(this.state.heat >= 100) this.overheat();
            },

            // --- ACTIONS ---
            hack(e) {
                if(!this.state.active || this.state.heat >= 100) {
                    this.audio.error();
                    return;
                }

                const t = TARGETS[this.state.targetId];
                
                // Apply Breach
                this.state.breach += this.stats.power * this.state.multiplier;
                
                // Generate Heat & Risk
                this.state.heat += 4; // Flat heat per click
                this.state.risk += (t.sec * 1.5) / this.stats.stealth;

                // FX
                this.audio.click();
                this.particles.spawn(e.clientX, e.clientY, '#00f3ff');
                
                // Visual Recoil
                const core = document.getElementById('neural-core');
                core.style.transform = "scale(0.95)";
                setTimeout(() => core.style.transform = "scale(1)", 50);
            },

            useSkill(type) {
                if(!this.state.active) return;
                
                // Check Cooldowns
                let cdKey = '';
                if(type === 'brute') cdKey = 'q';
                if(type === 'worm') cdKey = 'w';
                if(type === 'ghost') cdKey = 'e';
                if(type === 'flush') cdKey = 'r';

                if(this.cooldowns[cdKey] > 0) {
                    this.audio.error(); return;
                }

                this.audio.skill();
                this.cooldowns[cdKey] = 100; // Reset CD to 100%

                // Apply Effects
                if(type === 'brute') {
                    this.state.breach += this.stats.power * 20;
                    this.state.heat += 30; // High heat cost
                    UI.spawnFloat("BRUTE FORCE!", "#ff2a2a");
                }
                else if(type === 'worm') {
                    // Temporary auto-hack boost could be implemented here, simple logic for now
                    this.state.breach += 500;
                    this.state.risk += 10;
                    UI.spawnFloat("WORM UPLOADED", "#00ff66");
                }
                else if(type === 'ghost') {
                    this.state.risk -= 30;
                    if(this.state.risk < 0) this.state.risk = 0;
                    UI.spawnFloat("LOGS CLEARED", "#bc13fe");
                }
                else if(type === 'flush') {
                    this.state.heat -= this.stats.venting * 3; // Huge cooling
                    if(this.state.heat < 0) this.state.heat = 0;
                    this.audio.cool();
                    UI.spawnFloat("COOLANT FLUSH", "#00f3ff");
                }
            },

            overheat() {
                this.state.heat = 100;
                document.getElementById('neural-core').classList.add('overheat');
                if(Math.random() > 0.9) this.audio.error();
            },

            checkWinCondition() {
                const t = TARGETS[this.state.targetId];
                if(this.state.breach >= t.hp) {
                    this.state.breach = 0;
                    
                    // Rewards
                    const cash = Math.floor(t.reward * this.state.multiplier);
                    this.state.money += cash;
                    this.state.data += t.req; // Data matches level req for simplicity
                    
                    this.audio.success();
                    UI.log(`BAƒûLANTI BA≈ûARILI: +${cash} ‚Çø`, "log-success");
                    UI.spawnFloat(`+${cash} ‚Çø`, "#ffcc00");

                    // Level Up Logic
                    if(this.state.data >= this.state.level * 10) {
                        this.state.level++;
                        UI.log(`SEVƒ∞YE Y√úKSELDƒ∞: ${this.state.level}`, "log-info");
                        UI.renderTargets();
                    }
                }
            },

            buy(id) {
                const item = UPGRADES.find(u => u.id === id);
                const lvl = this.state.upgrades[id];
                const cost = Math.floor(item.cost * Math.pow(item.mult, lvl));

                if(this.state.money >= cost) {
                    this.state.money -= cost;
                    this.state.upgrades[id]++;
                    this.updateStats();
                    this.audio.success();
                    UI.renderShop();
                    UI.log(`${item.name} Y√ºkseltildi (Lvl ${lvl+1})`, "log-info");
                } else {
                    this.audio.error();
                }
            },

            updateStats() {
                // Calculate base stats from upgrades
                this.stats.power = 5 + (this.state.upgrades.cpu * 3);
                this.stats.cooling = 0.2 + (this.state.upgrades.cool * 0.1);
                this.stats.auto = this.state.upgrades.bot * 5;
                this.stats.passive = this.state.upgrades.mine * 10;
                // RAM affects cooldown speed implicitly in loop
                
                // Update Sidebar Stats
                document.getElementById('stat-power').innerText = (this.stats.power / 5).toFixed(1) + " GHz";
                document.getElementById('stat-ram').innerText = (4 + this.state.upgrades.ram * 4) + " GB";
                document.getElementById('stat-cool').innerText = this.stats.cooling.toFixed(1) + " T/s";
            },

            setTarget(id) {
                if(this.state.level < TARGETS[id].req) {
                    this.audio.error(); return;
                }
                this.state.targetId = id;
                this.state.breach = 0;
                this.state.risk = 0; // New target resets active trace? Optional design.
                UI.renderTargets();
                UI.log(`HEDEF: ${TARGETS[id].name}`, "log-info");
            },

            gameOver(reason) {
                this.state.active = false;
                clearInterval(this.loopId);
                document.getElementById('game-over-modal').style.display = 'flex';
                document.getElementById('end-data').innerText = Math.floor(this.state.data);
                document.getElementById('end-money').innerText = Math.floor(this.state.money);
                this.audio.error();
            }
        };

        /* --- 5. UI CONTROLLER --- */
        const UI = {
            update() {
                // Texts
                document.getElementById('money-disp').innerText = Math.floor(Game.state.money).toLocaleString();
                document.getElementById('data-disp').innerText = Game.state.data;
                document.getElementById('multi-disp').innerText = Game.state.multiplier.toFixed(1);
                
                // Bars
                const t = TARGETS[Game.state.targetId];
                const bPct = Math.min(100, (Game.state.breach / t.hp) * 100);
                document.getElementById('bar-breach').style.width = bPct + "%";
                document.getElementById('breach-val').innerText = Math.floor(bPct);

                document.getElementById('bar-risk').style.width = Math.min(100, Game.state.risk) + "%";
                document.getElementById('risk-val').innerText = Math.floor(Game.state.risk);

                document.getElementById('bar-heat').style.width = Math.min(100, Game.state.heat) + "%";
                document.getElementById('heat-val').innerText = Math.floor(Game.state.heat);

                // Overheat removal
                if(Game.state.heat < 100) document.getElementById('neural-core').classList.remove('overheat');

                // Skill Overlays (Cooldowns)
                ['q','w','e','r'].forEach(k => {
                    const cd = Game.cooldowns[k];
                    document.getElementById(`cd-${k}`).style.height = cd + "%";
                    const slot = document.getElementById(`skill-${k}`);
                    if(cd > 0) slot.classList.add('cooldown');
                    else slot.classList.remove('cooldown');
                });
            },

            renderTargets() {
                const list = document.getElementById('target-list');
                list.innerHTML = "";
                TARGETS.forEach(t => {
                    const locked = Game.state.level < t.req;
                    const active = Game.state.targetId === t.id;
                    list.innerHTML += `
                        <div class="target-card ${locked?'locked':''} ${active?'active':''}" onclick="Game.setTarget(${t.id})">
                            <div class="t-name">${t.name}</div>
                            <div class="t-meta">
                                <span>SEC: x${t.sec}</span>
                                <span style="color:var(--c-gold)">${t.reward} ‚Çø</span>
                            </div>
                        </div>
                    `;
                });
                document.getElementById('lvl-disp').innerText = Game.state.level;
            },

            renderShop() {
                const list = document.getElementById('tab-market');
                list.innerHTML = "";
                UPGRADES.forEach(u => {
                    const lvl = Game.state.upgrades[u.id];
                    const cost = Math.floor(u.cost * Math.pow(u.mult, lvl));
                    const afford = Game.state.money >= cost;
                    
                    list.innerHTML += `
                        <div class="shop-item ${afford?'':'disabled'}" onclick="Game.buy('${u.id}')">
                            <div class="item-icon">${u.icon}</div>
                            <div class="item-details">
                                <div class="item-title">${u.name} <span style="font-size:0.7em; color:#666">Lvl ${lvl}</span></div>
                                <div class="item-desc">${u.desc}</div>
                            </div>
                            <div class="item-price">${cost} ‚Çø</div>
                        </div>
                    `;
                });
            },

            log(msg, type="log-info") {
                const con = document.getElementById('console-log');
                const div = document.createElement('div');
                div.className = `log-entry ${type}`;
                div.innerText = `> ${msg}`;
                con.prepend(div);
                if(con.children.length > 20) con.lastChild.remove();
            },

            spawnFloat(txt, color) {
                const el = document.createElement('div');
                el.className = 'float-txt';
                el.innerText = txt;
                el.style.color = color;
                // Center screen spawn
                const core = document.getElementById('neural-core').getBoundingClientRect();
                el.style.left = (core.left + core.width/2 - 30) + 'px';
                el.style.top = (core.top) + 'px';
                document.body.appendChild(el);
                setTimeout(()=>el.remove(), 1000);
            },

            switchTab(tab) {
                document.getElementById('tab-market').style.display = tab==='market'?'block':'none';
                document.getElementById('tab-logs').style.display = tab==='logs'?'block':'none';
                
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                event.target.classList.add('active');
            }
        };

    </script>
</body>
</html>
