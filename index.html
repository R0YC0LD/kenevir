<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CYBER BREACH: SYSTEM SHOCK</title>
    <style>
        /* --- CORE --- */
        :root {
            --bg: #050505;
            --panel: rgba(13, 17, 23, 0.95);
            --primary: #00f3ff;
            --danger: #ff003c;
            --warn: #ffcc00;
            --safe: #00ff88;
            --font-ui: 'Segoe UI', system-ui, sans-serif;
            --font-mono: 'Courier New', monospace;
        }
        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; cursor: default; }
        
        body {
            margin: 0; background: var(--bg); color: #fff; font-family: var(--font-ui);
            height: 100vh; overflow: hidden; display: flex; justify-content: center; align-items: center;
        }

        /* Arkaplan Animasyonu */
        .matrix-rain {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: 
                linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: bgScroll 20s linear infinite;
        }
        @keyframes bgScroll { from { background-position: 0 0; } to { background-position: 30px 30px; } }

        /* --- SCREENS --- */
        .screen {
            position: absolute; inset: 0; display: none; 
            flex-direction: column; transition: opacity 0.5s;
        }
        .screen.active { display: flex; }

        /* --- MENU (BIOS) --- */
        #bios-screen {
            background: #000; color: var(--primary); font-family: var(--font-mono);
            padding: 40px; align-items: center; justify-content: center;
        }
        .bios-logo { font-size: 3rem; font-weight: bold; margin-bottom: 20px; text-shadow: 0 0 10px var(--primary); }
        .bios-menu { width: 400px; border: 2px solid var(--primary); padding: 20px; }
        .bios-item {
            padding: 10px; cursor: pointer; border-bottom: 1px dashed #333; display: flex; justify-content: space-between;
        }
        .bios-item:hover { background: var(--primary); color: #000; }
        
        /* --- GAME UI --- */
        #game-interface {
            display: grid; grid-template-columns: 300px 1fr 320px; gap: 10px;
            width: 100%; height: 100%; max-width: 1920px; padding: 10px;
        }

        .panel {
            background: var(--panel); border: 1px solid #333; border-radius: 6px;
            display: flex; flex-direction: column; overflow: hidden; position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .panel-header {
            padding: 12px; background: rgba(255,255,255,0.03); border-bottom: 1px solid #333;
            font-weight: bold; color: var(--primary); letter-spacing: 1px;
            display: flex; justify-content: space-between;
        }
        .scroll-content { overflow-y: auto; flex-grow: 1; padding: 10px; }

        /* CENTER DASHBOARD */
        .dashboard { align-items: center; justify-content: center; position: relative; }
        
        .hud-top {
            position: absolute; top: 0; left: 0; width: 100%; padding: 15px;
            display: flex; justify-content: space-around; background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
        }
        .hud-stat { text-align: center; }
        .hud-val { font-family: var(--font-mono); font-size: 1.5rem; font-weight: bold; }
        
        /* ACTIONS CONTAINER */
        .action-area {
            display: flex; gap: 40px; align-items: center; margin-top: 40px;
        }

        /* HACK BUTTON */
        #hack-btn {
            width: 220px; height: 220px; border-radius: 50%;
            border: 4px solid var(--primary);
            background: radial-gradient(circle, rgba(0, 243, 255, 0.1), rgba(0,0,0,0.8));
            box-shadow: 0 0 30px var(--primary);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.1s;
        }
        #hack-btn:active { transform: scale(0.95); background: rgba(0, 243, 255, 0.2); }
        .hack-icon { font-size: 4rem; margin-bottom: 5px; pointer-events: none; }
        
        /* COOLANT LEVER (New Mechanic) */
        #cool-btn {
            width: 120px; height: 120px; border-radius: 10px;
            border: 3px solid var(--safe);
            background: radial-gradient(circle, rgba(0, 255, 136, 0.1), rgba(0,0,0,0.8));
            box-shadow: 0 0 20px var(--safe);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.1s; position: relative;
        }
        #cool-btn:active { transform: translateY(5px); box-shadow: 0 0 5px var(--safe); background: var(--safe); color: black; }
        .cool-icon { font-size: 2.5rem; pointer-events: none; }
        .steam-particle {
            position: absolute; width: 10px; height: 10px; background: rgba(255,255,255,0.5);
            border-radius: 50%; animation: steamUp 1s forwards; pointer-events: none;
        }

        /* BARS */
        .bars-wrapper { width: 500px; margin-top: 40px; }
        .bar-group { margin-bottom: 15px; }
        .bar-label { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        .track { height: 14px; background: #111; border: 1px solid #444; border-radius: 7px; overflow: hidden; position: relative; }
        .fill { height: 100%; transition: width 0.1s linear; }
        
        /* Risk Bar with warning stripes */
        #risk-fill { 
            background: repeating-linear-gradient(45deg, var(--danger), var(--danger) 10px, #aa0028 10px, #aa0028 20px); 
        }

        /* --- LIST ITEMS --- */
        .list-card {
            background: rgba(255,255,255,0.02); border: 1px solid #333; padding: 12px;
            margin-bottom: 8px; cursor: pointer; transition: 0.2s; display: flex; align-items: center;
        }
        .list-card:hover { border-color: var(--primary); background: rgba(0, 243, 255, 0.05); }
        .list-card.locked { opacity: 0.4; filter: grayscale(1); pointer-events: none; }
        .list-card.active { border-color: var(--safe); box-shadow: inset 4px 0 0 var(--safe); }
        
        .card-icon { font-size: 1.5rem; margin-right: 15px; width: 30px; text-align: center; }
        .card-info { flex-grow: 1; }
        .card-title { font-weight: bold; font-size: 0.9rem; color: #fff; }
        .card-meta { font-size: 0.75rem; color: #888; display: flex; justify-content: space-between; margin-top: 2px; }

        /* --- OVERLAYS --- */
        #boot-overlay {
            position: fixed; inset: 0; background: #000; z-index: 9999;
            display: none; font-family: 'Consolas', monospace; color: #ccc;
            padding: 20px; flex-direction: column; justify-content: flex-start;
        }
        .boot-line { margin-bottom: 5px; }

        #alert-overlay {
            position: absolute; inset: 0; pointer-events: none; z-index: 50;
            background: radial-gradient(circle, transparent 50%, rgba(255,0,60,0.5) 100%);
            opacity: 0; transition: opacity 0.5s;
        }

        /* --- ANIMATIONS --- */
        @keyframes steamUp { 0% { opacity:0.8; transform: translateY(0) scale(1); } 100% { opacity:0; transform: translateY(-50px) scale(3); } }
        @keyframes shake { 0% { transform: translate(1px, 1px) } 25% { transform: translate(-2px, -2px) } 75% { transform: translate(-1px, 2px) } }
        
        /* Mobile */
        @media (max-width: 1000px) {
            #game-interface { grid-template-columns: 1fr; display: flex; flex-direction: column; overflow-y: auto; }
            .action-area { flex-direction: column; gap: 20px; }
            .bars-wrapper { width: 90%; }
        }
    </style>
</head>
<body>

    <div class="matrix-rain"></div>

    <div id="bios-screen" class="screen active">
        <div class="bios-logo">SYSTEM_BIOS v8.0</div>
        <div class="bios-menu">
            <div class="bios-item" onclick="game.startRun()">
                <span>> Sƒ∞STEMƒ∞ BA≈ûLAT</span>
                <span>[ENTER]</span>
            </div>
            <div class="bios-item">
                <span>> Mƒ∞RAS PUANI (LP)</span>
                <span id="bios-lp">0</span>
            </div>
            <div style="margin-top: 20px; font-size: 0.8rem; color: #666;">
                Dƒ∞KKAT: 10 √á√ñKME DURUMUNDA VERƒ∞LER Sƒ∞Lƒ∞Nƒ∞R.
            </div>
        </div>
    </div>

    <div id="boot-overlay"></div>

    <div id="game-interface" class="screen">
        <div id="alert-overlay"></div>

        <div class="panel">
            <div class="panel-header">
                <span>HEDEFLER</span>
                <span style="color:var(--safe)">LVL <span id="lvl-display">1</span></span>
            </div>
            <div class="scroll-content" id="target-list"></div>
            <div style="padding: 10px; border-top: 1px solid #333; font-size: 0.7rem; color: #555;">
                > Baƒülantƒ± durumu: STABƒ∞L
            </div>
        </div>

        <div class="panel dashboard">
            <div class="hud-top">
                <div class="hud-stat">
                    <div style="font-size:0.8rem; color:#888;">ZAMAN √áARPANI</div>
                    <div class="hud-val" style="color:var(--primary);">x<span id="multi-display">1.0</span></div>
                </div>
                <div class="hud-stat">
                    <div style="font-size:0.8rem; color:#888;">KRƒ∞PTO VARLIK</div>
                    <div class="hud-val" style="color:var(--warn);"><span id="money-display">0</span> ‚Çø</div>
                </div>
            </div>

            <div class="action-area">
                <div id="hack-btn" onmousedown="game.actionHack(event)">
                    <div class="hack-icon">‚ò†</div>
                    <div style="letter-spacing:2px; font-weight:bold;">SALDIR</div>
                </div>

                <div id="cool-btn" onmousedown="game.actionCool(event)">
                    <div class="cool-icon">‚ùÑÔ∏è</div>
                    <div style="font-size:0.7rem; font-weight:bold; margin-top:5px;">SOƒûUT</div>
                </div>
            </div>

            <div class="bars-wrapper">
                <div class="bar-group">
                    <div class="bar-label">
                        <span style="color:var(--primary)">VERƒ∞ SIZINTISI</span>
                        <span id="breach-txt">0%</span>
                    </div>
                    <div class="track"><div id="breach-bar" class="fill" style="background:var(--primary); box-shadow:0 0 10px var(--primary);"></div></div>
                </div>

                <div class="bar-group">
                    <div class="bar-label">
                        <span style="color:var(--danger)">Sƒ∞STEM ISISI / Rƒ∞SK</span>
                        <span id="risk-txt">0%</span>
                    </div>
                    <div class="track"><div id="risk-bar" class="fill"></div></div>
                </div>

                <div class="bar-group" style="opacity: 0.7;">
                    <div class="bar-label"><span>SEVƒ∞YE ƒ∞LERLEMESƒ∞</span></div>
                    <div class="track" style="height:4px;"><div id="xp-bar" class="fill" style="background:var(--safe);"></div></div>
                </div>

                <div style="text-align:center; font-size:0.8rem; margin-top:10px;">
                    Sƒ∞STEM HAKLARI: <span id="strikes-display" style="color:var(--danger)">10</span> / 10
                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-header">
                <span>KARABORSA</span>
                <span id="passive-display" style="font-size:0.8rem; color:#888;">0/sn</span>
            </div>
            <div class="scroll-content" id="shop-list"></div>
        </div>

    </div>

    <script>
        /* --- SES MOTORU (ADVANCED SYNTH) --- */
        const AudioSys = {
            ctx: new (window.AudioContext || window.webkitAudioContext)(),
            
            playTone(freq, type, dur, vol=0.1, slide=0) {
                if(this.ctx.state === 'suspended') this.ctx.resume();
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
                if(slide) osc.frequency.linearRampToValueAtTime(freq+slide, this.ctx.currentTime+dur);
                
                gain.gain.setValueAtTime(vol, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + dur);

                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.start();
                osc.stop(this.ctx.currentTime + dur);
            },

            // WINDOWS-LIKE STARTUP SOUND (Chord)
            playBoot() {
                const now = this.ctx.currentTime;
                const notes = [261.63, 329.63, 392.00, 523.25]; // C Major
                notes.forEach((freq, i) => {
                    setTimeout(() => {
                        this.playTone(freq, 'sine', 2.0, 0.1);
                        this.playTone(freq/2, 'triangle', 2.0, 0.05);
                    }, i * 150);
                });
            },

            sfx(type) {
                switch(type) {
                    case 'click': this.playTone(800 + Math.random()*200, 'triangle', 0.1, 0.05); break;
                    case 'cool': 
                        // White noise burst for steam
                        const bSize = this.ctx.sampleRate * 0.3;
                        const buf = this.ctx.createBuffer(1, bSize, this.ctx.sampleRate);
                        const data = buf.getChannelData(0);
                        for(let i=0; i<bSize; i++) data[i] = Math.random() * 2 - 1;
                        const src = this.ctx.createBufferSource();
                        const g = this.ctx.createGain();
                        src.buffer = buf;
                        g.gain.setValueAtTime(0.1, this.ctx.currentTime);
                        g.gain.linearRampToValueAtTime(0, this.ctx.currentTime+0.3);
                        src.connect(g); g.connect(this.ctx.destination);
                        src.start();
                        break;
                    case 'money': this.playTone(1200, 'square', 0.15, 0.05); break;
                    case 'error': this.playTone(150, 'sawtooth', 0.4, 0.2, -50); break;
                    case 'warning': this.playTone(800, 'sine', 0.1, 0.05, -200); break;
                }
            }
        };

        /* --- DATA --- */
        const TARGETS = [
            { id: 0, name: "Yerel Aƒü", hp: 100, sec: 1.0, reward: 50, req: 1, icon: "üè†" },
            { id: 1, name: "Kahve D√ºkkanƒ±", hp: 300, sec: 1.5, reward: 150, req: 2, icon: "‚òï" },
            { id: 2, name: "ATM Terminali", hp: 800, sec: 2.2, reward: 400, req: 3, icon: "üèß" },
            { id: 3, name: "Trafik I≈üƒ±klarƒ±", hp: 2000, sec: 3.0, reward: 1200, req: 5, icon: "üö¶" },
            { id: 4, name: "Kurumsal Bulut", hp: 5000, sec: 4.5, reward: 3500, req: 8, icon: "‚òÅÔ∏è" },
            { id: 5, name: "Uydu Aƒüƒ±", hp: 15000, sec: 7.0, reward: 10000, req: 12, icon: "üõ∞Ô∏è" },
            { id: 6, name: "AI √áekirdeƒüi", hp: 50000, sec: 10.0, reward: 50000, req: 15, icon: "üß†" }
        ];

        const UPGRADES = [
            { id: 'cpu', name: 'CPU Overclock', desc: 'Tƒ±klama G√ºc√º', base: 50, mult: 1.5, icon: '‚ö°' },
            { id: 'bot', name: 'Botnet Node', desc: 'Oto Hack (+Risk)', base: 250, mult: 1.4, icon: 'ü§ñ' },
            { id: 'cool', name: 'Sƒ±vƒ± Soƒüutma', desc: 'Soƒüutma G√ºc√º', base: 200, mult: 1.5, icon: '‚ùÑÔ∏è' },
            { id: 'mine', name: 'Kripto Rig', desc: 'Pasif Gelir', base: 600, mult: 1.4, icon: '‚õèÔ∏è' }
        ];

        /* --- GAME ENGINE --- */
        const game = {
            meta: { lp: 0 },
            run: {
                active: false,
                money: 0,
                xp: 0,
                lvl: 1,
                targetId: 0,
                breach: 0,
                risk: 0,
                strikes: 10,
                multiplier: 1.0,
                stats: { click: 2, auto: 0, coolPower: 15, passive: 0 },
                upgrades: { cpu:0, bot:0, cool:0, mine:0 }
            },
            timers: [],

            // --- INITIALIZATION ---
            init() {
                const saved = localStorage.getItem('cyber_shock_save');
                if(saved) this.meta = JSON.parse(saved);
                document.getElementById('bios-lp').innerText = this.meta.lp;
            },

            startRun() {
                // Boot Sequence UI
                document.getElementById('bios-screen').classList.remove('active');
                this.triggerBoot(() => {
                    this.run = {
                        active: true, money: 0, xp: 0, lvl: 1, targetId: 0, breach: 0, risk: 0, strikes: 10, multiplier: 1.0,
                        stats: { click: 5, auto: 0, coolPower: 20, passive: 0 },
                        upgrades: { cpu:0, bot:0, cool:0, mine:0 }
                    };
                    this.ui.renderTargets();
                    this.ui.renderShop();
                    this.ui.updateGlobal();
                    
                    document.getElementById('game-interface').classList.add('active');
                    
                    // Start Loops
                    this.timers.push(setInterval(() => this.loop(), 1000/60)); // 60 FPS Logic
                    this.timers.push(setInterval(() => this.increaseMulti(), 10000)); // Time Multiplier
                });
            },

            // --- BOOT EFFECT ---
            triggerBoot(callback) {
                const overlay = document.getElementById('boot-overlay');
                overlay.style.display = 'flex';
                overlay.innerHTML = '';
                const lines = [
                    "BIOS DATE 12/08/2077 14:22:55 VER 8.0",
                    "CPU: QUANTUM CORE i9 - 128 CORES",
                    "RAM: 256 TB CHECKING... OK",
                    "LOADING OS...",
                    "SYSTEM READY."
                ];
                let i = 0;
                const int = setInterval(() => {
                    if(i < lines.length) {
                        overlay.innerHTML += `<div class="boot-line">${lines[i]}</div>`;
                        i++;
                    } else {
                        clearInterval(int);
                        AudioSys.playBoot(); // PLAY SOUND
                        setTimeout(() => {
                            overlay.style.display = 'none';
                            callback();
                        }, 1000);
                    }
                }, 400);
            },

            // --- CORE LOOP ---
            loop() {
                if(!this.run.active) return;
                const dt = 1/60;

                // 1. Passive Income
                if(this.run.stats.passive > 0) {
                    this.run.money += (this.run.stats.passive * dt) * this.run.multiplier;
                }

                // 2. Bot Logic (Auto Hack + HEAT GENERATION)
                if(this.run.stats.auto > 0) {
                    this.run.breach += (this.run.stats.auto * dt) * this.run.multiplier;
                    // Bots generate risk!
                    const t = TARGETS[this.run.targetId];
                    this.run.risk += (this.run.stats.auto * 0.05 * t.sec * dt);
                }

                // 3. Logic Checks
                this.checkState();
                this.ui.updateBars();

                // 4. Warning FX
                const alert = document.getElementById('alert-overlay');
                if(this.run.risk > 80) {
                    alert.style.opacity = (Math.sin(Date.now() / 100) + 1) / 4; // Pulse
                    if(Math.random() > 0.95) AudioSys.sfx('warning');
                } else {
                    alert.style.opacity = 0;
                }
            },

            increaseMulti() {
                if(!this.run.active) return;
                this.run.multiplier += 0.3;
                document.getElementById('multi-display').innerText = this.run.multiplier.toFixed(1);
            },

            // --- ACTIONS ---
            actionHack(e) {
                if(!this.run.active) return;
                const t = TARGETS[this.run.targetId];
                
                // Breach
                this.run.breach += this.run.stats.click * this.run.multiplier;
                
                // Risk (Manual clicks add heat)
                this.run.risk += t.sec * 1.2;

                // FX
                AudioSys.sfx('click');
                const btn = document.getElementById('hack-btn');
                btn.style.transform = "scale(0.95)";
                setTimeout(() => btn.style.transform = "scale(1)", 50);

                this.checkState();
            },

            actionCool(e) {
                if(!this.run.active) return;
                if(this.run.risk <= 0) return;

                // Manual Flush reduces risk significantly
                this.run.risk -= this.run.stats.coolPower;
                if(this.run.risk < 0) this.run.risk = 0;

                // FX
                AudioSys.sfx('cool');
                const btn = document.getElementById('cool-btn');
                btn.style.transform = "translateY(5px)";
                setTimeout(() => btn.style.transform = "translateY(0)", 100);

                // Particles
                for(let i=0; i<5; i++) {
                    const p = document.createElement('div');
                    p.className = 'steam-particle';
                    p.style.left = (e.clientX + (Math.random()-0.5)*50) + "px";
                    p.style.top = (e.clientY + (Math.random()-0.5)*50) + "px";
                    document.body.appendChild(p);
                    setTimeout(() => p.remove(), 1000);
                }
            },

            buy(id) {
                const upg = UPGRADES.find(u => u.id === id);
                const lvl = this.run.upgrades[id];
                const cost = Math.floor(upg.base * Math.pow(upg.mult, lvl));

                if(this.run.money >= cost) {
                    this.run.money -= cost;
                    this.run.upgrades[id]++;

                    // Apply
                    if(id === 'cpu') this.run.stats.click += 3;
                    if(id === 'bot') this.run.stats.auto += 5;
                    if(id === 'cool') this.run.stats.coolPower += 5; // Better flush
                    if(id === 'mine') this.run.stats.passive += 15;

                    AudioSys.sfx('money');
                    this.ui.renderShop();
                } else {
                    AudioSys.sfx('error');
                }
            },

            setTarget(id) {
                this.run.targetId = id;
                this.run.breach = 0;
                this.run.risk = 0;
                this.ui.renderTargets();
            },

            // --- GAME LOGIC ---
            checkState() {
                const t = TARGETS[this.run.targetId];

                // Success
                if(this.run.breach >= t.hp) {
                    this.run.breach = 0;
                    this.run.money += Math.floor(t.reward * this.run.multiplier);
                    this.run.xp += t.sec * 10;
                    
                    if(this.run.xp >= 100 * this.run.lvl) {
                        this.run.lvl++;
                        this.run.xp = 0;
                        this.ui.renderTargets();
                    }
                    
                    AudioSys.sfx('money');
                    this.ui.updateGlobal();
                }

                // SYSTEM CRASH
                if(this.run.risk >= 100) {
                    this.triggerCrash();
                }
            },

            triggerCrash() {
                this.run.risk = 0;
                this.run.strikes--;
                this.run.multiplier = 1.0; // PENALTY: Reset Multiplier
                AudioSys.sfx('error');

                // UI Updates
                this.ui.updateGlobal();
                document.getElementById('multi-display').innerText = "1.0";
                
                // Overlay Boot
                this.run.active = false; // Pause logic
                this.triggerBoot(() => {
                    if(this.run.strikes <= 0) {
                        this.gameOver();
                    } else {
                        this.run.active = true; // Resume
                    }
                });
            },

            gameOver() {
                this.timers.forEach(clearInterval);
                this.timers = [];
                document.getElementById('game-interface').classList.remove('active');
                
                // Convert Legacy
                const earned = Math.floor(this.run.money / 100);
                this.meta.lp += earned;
                localStorage.setItem('cyber_shock_save', JSON.stringify(this.meta));
                
                // Return to BIOS
                document.getElementById('bios-lp').innerText = this.meta.lp;
                document.getElementById('bios-screen').classList.add('active');
                alert(`BAƒûLANTI SONLANDI. KAZANILAN Mƒ∞RAS PUANI: ${earned}`);
            },

            // --- UI RENDERER ---
            ui: {
                updateGlobal() {
                    document.getElementById('money-display').innerText = Math.floor(game.run.money).toLocaleString();
                    document.getElementById('lvl-display').innerText = game.run.lvl;
                    document.getElementById('strikes-display').innerText = game.run.strikes;
                    document.getElementById('passive-display').innerText = (game.run.stats.passive * game.run.multiplier).toFixed(1) + "/sn";
                },
                
                updateBars() {
                    if(!game.run.active) return;
                    document.getElementById('money-display').innerText = Math.floor(game.run.money).toLocaleString(); // Smooth

                    const t = TARGETS[game.run.targetId];
                    const bPct = Math.min(100, (game.run.breach / t.hp) * 100);
                    document.getElementById('breach-bar').style.width = bPct + "%";
                    document.getElementById('breach-txt').innerText = Math.floor(bPct) + "%";

                    document.getElementById('risk-bar').style.width = Math.min(100, game.run.risk) + "%";
                    document.getElementById('risk-txt').innerText = Math.floor(game.run.risk) + "%";

                    const xpPct = (game.run.xp / (100 * game.run.lvl)) * 100;
                    document.getElementById('xp-bar').style.width = xpPct + "%";

                    // Visuals
                    const riskBar = document.getElementById('risk-bar');
                    if(game.run.risk > 80) riskBar.style.backgroundColor = "var(--danger)";
                    else riskBar.style.backgroundColor = "var(--warn)";
                },

                renderTargets() {
                    const list = document.getElementById('target-list');
                    list.innerHTML = "";
                    TARGETS.forEach(t => {
                        const locked = game.run.lvl < t.req;
                        const active = game.run.targetId === t.id;
                        list.innerHTML += `
                            <div class="list-card ${locked?'locked':''} ${active?'active':''}"
                                 onclick="${!locked ? `game.logic.setTarget(${t.id})` : ''}">
                                <div class="card-icon">${t.icon}</div>
                                <div class="card-info">
                                    <div class="card-title">${t.name}</div>
                                    <div class="card-meta"><span>G√ºvenlik x${t.sec}</span><span>${t.reward} ‚Çø</span></div>
                                </div>
                            </div>
                        `;
                    });
                },

                renderShop() {
                    const list = document.getElementById('shop-list');
                    list.innerHTML = "";
                    UPGRADES.forEach(u => {
                        const lvl = game.run.upgrades[u.id];
                        const cost = Math.floor(u.base * Math.pow(u.mult, lvl));
                        const afford = game.run.money >= cost;
                        list.innerHTML += `
                            <div class="list-card" style="opacity:${afford?1:0.5}" onclick="game.buy('${u.id}')">
                                <div class="card-icon">${u.icon}</div>
                                <div class="card-info">
                                    <div class="card-title">${u.name} (Lvl ${lvl})</div>
                                    <div class="card-meta"><span>${u.desc}</span><span style="color:#ffcc00">${cost} ‚Çø</span></div>
                                </div>
                            </div>
                        `;
                    });
                }
            }
        };

        // Initialize
        game.init();

    </script>
</body>
</html>
