<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CYBER BREACH: PROTOCOL</title>
    <style>
        /* --- CORE VISUALS --- */
        :root {
            --bg-color: #05070a;
            --panel-bg: rgba(16, 20, 25, 0.9);
            --neon-blue: #00f3ff;
            --neon-red: #ff2a2a;
            --neon-green: #00ff66;
            --neon-yellow: #ffcc00;
            --border-color: #334455;
            --font-main: 'Courier New', monospace;
        }

        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; }

        body {
            margin: 0;
            background-color: var(--bg-color);
            color: white;
            font-family: var(--font-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Arkaplan Grid Animasyonu */
        .bg-grid {
            position: absolute; width: 200vw; height: 200vh;
            background-image: linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            transform: perspective(500px) rotateX(60deg) translateY(-100px) translateZ(-200px);
            animation: gridMove 20s linear infinite;
            z-index: -1;
        }
        @keyframes gridMove { 0% { transform: perspective(500px) rotateX(60deg) translateY(0); } 100% { transform: perspective(500px) rotateX(60deg) translateY(40px); } }

        /* --- LAYOUT --- */
        #game-container {
            display: grid;
            grid-template-columns: 250px 1fr 250px;
            gap: 20px;
            width: 95vw;
            height: 90vh;
            max-width: 1400px;
        }

        .panel {
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            position: relative;
        }

        h2 { font-size: 1.2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin: 0 0 15px 0; color: var(--neon-blue); letter-spacing: 2px; }
        
        /* --- LEFT PANEL (STATS) --- */
        .stat-row { margin-bottom: 15px; }
        .stat-label { font-size: 0.8rem; color: #8899aa; }
        .stat-val { font-size: 1.4rem; font-weight: bold; color: white; }
        .currency { color: var(--neon-yellow); }

        /* --- CENTER PANEL (TERMINAL) --- */
        #main-terminal {
            align-items: center;
            justify-content: center;
            border: 2px solid var(--neon-blue);
            position: relative;
            overflow: hidden;
        }

        #target-circle {
            width: 250px; height: 250px;
            border-radius: 50%;
            border: 4px dashed var(--neon-blue);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            cursor: pointer;
            transition: 0.1s;
            background: rgba(0, 243, 255, 0.05);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.1);
            position: relative;
            z-index: 5;
        }
        #target-circle:active { transform: scale(0.95); background: rgba(0, 243, 255, 0.15); }
        #target-circle.locked { border-color: var(--neon-red); cursor: not-allowed; opacity: 0.5; animation: shake 0.5s infinite; }

        .progress-container { width: 100%; margin-top: 10px; background: #111; height: 20px; border: 1px solid #333; position: relative; }
        .bar-fill { height: 100%; width: 0%; transition: width 0.2s; }
        .bar-label { position: absolute; top: 0; left: 0; width: 100%; text-align: center; font-size: 0.75rem; line-height: 18px; text-shadow: 0 0 2px black; font-weight: bold; }

        /* Barların Renkleri */
        #trace-bar .bar-fill { background: var(--neon-red); box-shadow: 0 0 10px var(--neon-red); }
        #hack-bar .bar-fill { background: var(--neon-green); box-shadow: 0 0 10px var(--neon-green); }

        /* --- RIGHT PANEL (SHOP) --- */
        .shop-item {
            background: rgba(255,255,255,0.03);
            border: 1px solid #333;
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: 0.2s;
            display: flex; justify-content: space-between; align-items: center;
        }
        .shop-item:hover { border-color: var(--neon-yellow); background: rgba(255,204,0,0.05); }
        .shop-item.disabled { opacity: 0.5; cursor: not-allowed; border-color: #333; }
        
        .item-info div:first-child { font-weight: bold; font-size: 0.9rem; color: white; }
        .item-info div:last-child { font-size: 0.7rem; color: #aaa; }
        .item-cost { color: var(--neon-yellow); font-weight: bold; }

        /* --- EFFECTS --- */
        .floating-text {
            position: absolute; pointer-events: none; font-weight: bold; font-size: 1.2rem;
            animation: floatUp 1s forwards; text-shadow: 0 0 5px black;
        }
        @keyframes floatUp { 0% { transform: translateY(0) scale(1); opacity:1; } 100% { transform: translateY(-50px) scale(1.2); opacity:0; } }
        
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }

        /* Mobil Uyum */
        @media (max-width: 800px) {
            #game-container { grid-template-columns: 1fr; grid-template-rows: auto 1fr auto; height: 100vh; width: 100vw; gap: 5px; }
            .panel { padding: 10px; }
            #target-circle { width: 180px; height: 180px; }
        }
    </style>
</head>
<body>

    <div class="bg-grid"></div>

    <div id="game-container">
        
        <div class="panel" id="stats-panel">
            <h2>DURUM</h2>
            <div class="stat-row">
                <div class="stat-label">HEDEF SİSTEM</div>
                <div class="stat-val" id="target-name" style="color: var(--neon-blue);">Localhost</div>
            </div>
            <div class="stat-row">
                <div class="stat-label">TOPLANAN VERİ</div>
                <div class="stat-val" id="data-display">0 TB</div>
            </div>
            <div class="stat-row">
                <div class="stat-label">HESAP BAKİYESİ</div>
                <div class="stat-val currency" id="credit-display">0 CR</div>
            </div>
            <div style="margin-top: auto; font-size: 0.7rem; color: #555;">
                SYSTEM VERSION 2.4<br>CONNECTED
            </div>
        </div>

        <div class="panel" id="main-terminal">
            <div id="lockout-msg" style="position: absolute; top: 10px; color: var(--neon-red); font-weight: bold; display: none;">SİSTEM KİLİTLENDİ: <span id="lock-timer">0.0</span>s</div>
            
            <div id="target-circle" onclick="game.hack()">
                <div style="font-size: 3rem;" id="click-icon">⌨</div>
                <div style="margin-top: 10px; font-size: 0.8rem; color: #aaa;">TIKLA VE SIZ</div>
            </div>

            <div style="width: 80%; margin-top: 30px;">
                <div style="color: var(--neon-green); font-size: 0.8rem; margin-bottom: 5px; display: flex; justify-content: space-between;">
                    <span>ŞİFRE ÇÖZME</span>
                    <span id="hack-percent">0%</span>
                </div>
                <div class="progress-container" id="hack-bar">
                    <div class="bar-fill" style="width: 0%;"></div>
                    <div class="bar-label">CREDIT GENERATION</div>
                </div>

                <div style="color: var(--neon-red); font-size: 0.8rem; margin-top: 15px; margin-bottom: 5px; display: flex; justify-content: space-between;">
                    <span>İZLENME SEVİYESİ</span>
                    <span id="trace-percent">0%</span>
                </div>
                <div class="progress-container" id="trace-bar">
                    <div class="bar-fill" style="width: 0%;"></div>
                    <div class="bar-label">DETECTION RISK</div>
                </div>
            </div>
        </div>

        <div class="panel" id="shop-panel">
            <h2>DARK WEB</h2>
            
            <div class="shop-item" id="btn-cpu" onclick="game.buy('cpu')">
                <div class="item-info">
                    <div>CPU YÜKSELT</div>
                    <div>Veri Kazancı: +<span id="val-cpu">1</span></div>
                </div>
                <div class="item-cost" id="cost-cpu">50 CR</div>
            </div>

            <div class="shop-item" id="btn-cool" onclick="game.buy('cool')">
                <div class="item-info">
                    <div>SOĞUTMA SİSTEMİ</div>
                    <div>Risk Düşüş Hızı</div>
                </div>
                <div class="item-cost" id="cost-cool">100 CR</div>
            </div>

            <div class="shop-item" id="btn-bot" onclick="game.buy('bot')">
                <div class="item-info">
                    <div>BOTNET AĞI</div>
                    <div>Oto. Hack: <span id="val-bot">0</span>/sn</div>
                </div>
                <div class="item-cost" id="cost-bot">200 CR</div>
            </div>

            <div class="shop-item" id="btn-algo" onclick="game.buy('algo')">
                <div class="item-info">
                    <div>ALGORİTMA V2</div>
                    <div>Kredi Çarpanı</div>
                </div>
                <div class="item-cost" id="cost-algo">500 CR</div>
            </div>
        </div>

    </div>

    <script>
        /* --- SES MOTORU (Synthesizer) --- */
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playTone(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const now = audioCtx.currentTime;

            if (type === 'hit') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(400 + Math.random()*200, now);
                osc.frequency.exponentialRampToValueAtTime(100, now + 0.1);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.1);
                osc.start(now); osc.stop(now + 0.1);
            } else if (type === 'coin') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(1200, now);
                osc.frequency.linearRampToValueAtTime(2000, now + 0.1);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.15);
                osc.start(now); osc.stop(now + 0.15);
            } else if (type === 'alert') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(100, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.5);
                gain.gain.setValueAtTime(0.2, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.5);
                osc.start(now); osc.stop(now + 0.5);
            }
            osc.connect(gain);
            gain.connect(audioCtx.destination);
        }

        /* --- OYUN MOTORU --- */
        class CyberGame {
            constructor() {
                // Değişkenler
                this.data = 0;
                this.credits = 0;
                this.trace = 0;
                this.hackProgress = 0;
                this.isLocked = false;
                
                // Yükseltmeler ve İstatistikler
                this.stats = {
                    cpuPower: 1,      // Tık başına Data
                    cooling: 0.5,     // Saniyede düşen Risk
                    botnet: 0,        // Saniyedeki otomatik tık
                    algoMult: 1       // Kredi kazanım çarpanı
                };

                // Fiyatlar ve Seviyeler
                this.shop = {
                    cpu: { cost: 50, lvl: 1 },
                    cool: { cost: 100, lvl: 1 },
                    botnet: { cost: 200, lvl: 0 },
                    algo: { cost: 500, lvl: 1 }
                };

                // Hedef İsimleri (Kozmetik İlerleme)
                this.targets = ["Localhost", "Neighbour WiFi", "ATM Network", "City Cam System", "Bank Server", "Military DB", "Satellite Uplink", "AI Core"];
                this.currentTargetIdx = 0;
                this.dataForNextLevel = 1000;

                // UI Referansları
                this.ui = {
                    data: document.getElementById('data-display'),
                    creds: document.getElementById('credit-display'),
                    target: document.getElementById('target-name'),
                    traceBar: document.querySelector('#trace-bar .bar-fill'),
                    traceTxt: document.getElementById('trace-percent'),
                    hackBar: document.querySelector('#hack-bar .bar-fill'),
                    hackTxt: document.getElementById('hack-percent'),
                    circle: document.getElementById('target-circle'),
                    lockMsg: document.getElementById('lockout-msg'),
                    lockTimer: document.getElementById('lock-timer'),
                    // Market
                    btnCpu: document.getElementById('btn-cpu'),
                    btnCool: document.getElementById('btn-cool'),
                    btnBot: document.getElementById('btn-bot'),
                    btnAlgo: document.getElementById('btn-algo')
                };

                // Oyun Döngüsü Başlat
                this.lastTime = performance.now();
                requestAnimationFrame((t) => this.loop(t));
                setInterval(() => this.oneSecondLoop(), 1000); // Saniyelik işlemler
            }

            // --- TEMEL EYLEMLER ---

            hack() {
                if (this.isLocked) return;

                // 1. Veri Kazan
                let gain = this.stats.cpuPower;
                this.data += gain;
                
                // 2. Risk Arttır (Hızlı tıklama riski arttırır)
                // Risk her tıkta 4 artar. Soğutma saniyede düşürür.
                this.trace += 4; 
                if (this.trace > 100) this.trace = 100;

                // 3. Şifre Çözme İlerlemesi (Kredi için)
                // Her tık %2 ile %5 arası ilerleme sağlar
                let progress = Math.random() * 3 + 2;
                this.hackProgress += progress;

                if (this.hackProgress >= 100) {
                    this.payout();
                }

                // 4. Seviye Kontrolü
                if (this.data >= this.dataForNextLevel) {
                    this.levelUp();
                }

                // Efektler
                playTone('hit');
                this.checkLockout();
                this.updateUI();
                this.showFloatText(event.clientX, event.clientY, `+${gain} TB`, '#00f3ff');
            }

            payout() {
                this.hackProgress = 0;
                // Kredi Ödülü: (Seviye * 10) * Algoritma Çarpanı
                let reward = Math.floor((10 + (this.currentTargetIdx * 5)) * this.stats.algoMult);
                // Biraz rastgelelik
                reward = Math.floor(reward * (0.8 + Math.random() * 0.4));
                
                this.credits += reward;
                playTone('coin');
                
                // Efekt: Hedefin ortasında para yazısı
                const rect = this.ui.circle.getBoundingClientRect();
                this.showFloatText(rect.left + 125, rect.top + 125, `+${reward} CR`, '#ffcc00');
            }

            checkLockout() {
                if (this.trace >= 100) {
                    this.lockSystem();
                }
            }

            lockSystem() {
                this.isLocked = true;
                this.ui.circle.classList.add('locked');
                this.ui.lockMsg.style.display = 'block';
                playTone('alert');
                
                let cooldown = 5; // 5 saniye ceza
                
                let interval = setInterval(() => {
                    cooldown -= 0.1;
                    this.ui.lockTimer.innerText = cooldown.toFixed(1);
                    if (cooldown <= 0) {
                        clearInterval(interval);
                        this.isLocked = false;
                        this.trace = 50; // Ceza bitince risk %50'den başlar
                        this.ui.circle.classList.remove('locked');
                        this.ui.lockMsg.style.display = 'none';
                    }
                }, 100);
            }

            // --- ZAMANLAYICI DÖNGÜLERİ ---

            loop(time) {
                let dt = (time - this.lastTime) / 1000;
                this.lastTime = time;

                if (!this.isLocked && this.trace > 0) {
                    // Risk Soğutma: Saniyede "cooling" kadar düşer
                    this.trace -= this.stats.cooling * dt * 10; 
                    if (this.trace < 0) this.trace = 0;
                }

                // Otomatik Botnet Hack
                if (this.stats.botnet > 0 && !this.isLocked) {
                    // Botnet her frame'de ufak ufak veri ekler
                    this.data += (this.stats.botnet * this.stats.cpuPower) * dt;
                    
                    // Botnet yavaşça şifre de çözer (daha yavaş)
                    this.hackProgress += (this.stats.botnet * 2) * dt;
                    if(this.hackProgress >= 100) this.payout();
                }

                this.updateUIBars();
                requestAnimationFrame((t) => this.loop(t));
            }

            oneSecondLoop() {
                // Buton durumlarını güncelle
                this.updateShopButtons();
            }

            // --- MARKET SİSTEMİ ---

            buy(type) {
                let item = this.shop[type];
                if (this.credits >= item.cost) {
                    this.credits -= item.cost;
                    item.lvl++;
                    playTone('coin');

                    // Özellikleri Arttır
                    if (type === 'cpu') {
                        this.stats.cpuPower += 1;
                        item.cost = Math.floor(item.cost * 1.5);
                        document.getElementById('val-cpu').innerText = this.stats.cpuPower;
                    } 
                    else if (type === 'cool') {
                        this.stats.cooling += 0.2;
                        item.cost = Math.floor(item.cost * 1.6);
                    } 
                    else if (type === 'botnet') {
                        this.stats.botnet += 1;
                        item.cost = Math.floor(item.cost * 1.8);
                        document.getElementById('val-bot').innerText = this.stats.botnet;
                    } 
                    else if (type === 'algo') {
                        this.stats.algoMult += 0.5;
                        item.cost = Math.floor(item.cost * 2.0);
                    }

                    // Fiyatı Güncelle
                    document.getElementById(`cost-${type}`).innerText = item.cost + ' CR';
                    this.updateUI();
                    this.updateShopButtons();
                }
            }

            levelUp() {
                if (this.currentTargetIdx < this.targets.length - 1) {
                    this.currentTargetIdx++;
                    this.dataForNextLevel *= 2.5; // Bir sonraki hedef daha zor
                    this.ui.target.innerText = this.targets[this.currentTargetIdx];
                    this.showFloatText(window.innerWidth/2, window.innerHeight/2, "SYSTEM BREACHED - NEXT TARGET", "#00ff66");
                }
            }

            // --- GÖRSEL ---

            updateUI() {
                this.ui.data.innerText = Math.floor(this.data) + " TB";
                this.ui.creds.innerText = this.credits + " CR";
            }

            updateUIBars() {
                // Risk Barı
                this.ui.traceBar.style.width = this.trace + "%";
                this.ui.traceTxt.innerText = Math.floor(this.trace) + "%";
                // Renk değişimi
                if (this.trace > 80) this.ui.traceBar.style.backgroundColor = "#ff0000"; // Kritik
                else this.ui.traceBar.style.backgroundColor = "#ff2a2a";

                // Hack Barı
                this.ui.hackBar.style.width = Math.min(100, this.hackProgress) + "%";
                this.ui.hackTxt.innerText = Math.floor(Math.min(100, this.hackProgress)) + "%";
            }

            updateShopButtons() {
                // Paranın yettiği butonları parlat, yetmediğini söndür
                const check = (type, btn) => {
                    if (this.credits >= this.shop[type].cost) {
                        btn.classList.remove('disabled');
                        btn.style.borderColor = "#ffcc00";
                    } else {
                        btn.classList.add('disabled');
                        btn.style.borderColor = "#333";
                    }
                };

                check('cpu', this.ui.btnCpu);
                check('cool', this.ui.btnCool);
                check('botnet', this.ui.btnBot);
                check('algo', this.ui.btnAlgo);
            }

            showFloatText(x, y, text, color) {
                const el = document.createElement('div');
                el.className = 'floating-text';
                el.innerText = text;
                el.style.left = x + 'px';
                el.style.top = y + 'px';
                el.style.color = color;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 1000);
            }
        }

        // Oyunu Başlat
        const game = new CyberGame();

    </script>
</body>
</html>
