<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CYBER BREACH: ULTIMATE</title>
    <style>
        /* --- VISUAL CORE --- */
        :root {
            --bg-dark: #050505;
            --panel-bg: rgba(15, 20, 30, 0.9);
            --neon-cyan: #00f3ff;
            --neon-pink: #ff0055;
            --neon-green: #00ff66;
            --neon-gold: #ffcc00;
            --font-main: 'Courier New', monospace;
        }

        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; cursor: crosshair; }

        body {
            margin: 0; background-color: var(--bg-dark); color: white;
            font-family: var(--font-main); height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            perspective: 1000px;
        }

        /* Arkaplan Animasyonu */
        .cyber-grid {
            position: absolute; width: 200vw; height: 200vh;
            background-image: linear-gradient(rgba(0, 243, 255, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 243, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            transform: rotateX(60deg) translateY(-100px) translateZ(-200px);
            animation: gridMove 10s linear infinite; z-index: -2;
        }
        @keyframes gridMove { 0% { transform: rotateX(60deg) translateY(0); } 100% { transform: rotateX(60deg) translateY(50px); } }

        /* CRT Ekran Efekti */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15), rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px);
            pointer-events: none; z-index: 100;
        }

        /* --- LAYOUT --- */
        #game-layout {
            display: grid; grid-template-columns: 300px 1fr 300px; gap: 20px;
            width: 95vw; height: 90vh; max-width: 1600px; z-index: 10;
        }

        .panel {
            background: var(--panel-bg); border: 1px solid rgba(0, 243, 255, 0.3);
            padding: 20px; display: flex; flex-direction: column;
            box-shadow: 0 0 30px rgba(0,0,0,0.5); backdrop-filter: blur(10px);
            border-radius: 5px; position: relative; overflow: hidden;
        }
        .panel::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
            animation: scanHorizontal 3s infinite linear;
        }

        h2 { 
            font-size: 1.1rem; border-bottom: 1px solid #333; padding-bottom: 10px; 
            margin: 0 0 15px 0; color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan);
            display: flex; justify-content: space-between; align-items: center;
        }

        /* --- TARGET LIST --- */
        .target-item {
            padding: 12px; margin-bottom: 8px; border: 1px solid #333;
            background: rgba(0,0,0,0.3); transition: 0.3s; position: relative;
        }
        .target-item:hover { border-color: var(--neon-cyan); background: rgba(0, 243, 255, 0.1); }
        .target-item.active { border: 1px solid var(--neon-cyan); box-shadow: inset 0 0 20px rgba(0, 243, 255, 0.2); }
        .target-item.locked { opacity: 0.4; filter: grayscale(100%); cursor: not-allowed; }
        
        .t-name { font-weight: bold; font-size: 1rem; color: #fff; }
        .t-info { font-size: 0.75rem; color: #aaa; margin-top: 4px; display: flex; justify-content: space-between; }

        /* --- MAIN HACK BUTTON --- */
        #hack-container {
            flex-grow: 1; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; position: relative;
        }

        #hack-btn {
            width: 240px; height: 240px; border-radius: 50%;
            border: 4px solid var(--neon-cyan);
            background: radial-gradient(circle, rgba(0, 243, 255, 0.1) 0%, rgba(0,0,0,0.8) 100%);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            box-shadow: 0 0 50px rgba(0, 243, 255, 0.2), inset 0 0 20px rgba(0, 243, 255, 0.2);
            transition: 0.1s; position: relative; z-index: 5;
        }
        #hack-btn:active { transform: scale(0.92); box-shadow: 0 0 80px rgba(0, 243, 255, 0.6); border-color: white; }
        #hack-btn.danger { border-color: var(--neon-pink); box-shadow: 0 0 50px rgba(255, 0, 85, 0.4); animation: shake 0.3s infinite; }
        
        .btn-icon { font-size: 4rem; text-shadow: 0 0 20px var(--neon-cyan); pointer-events: none; }
        .btn-text { margin-top: 10px; font-size: 0.9rem; letter-spacing: 2px; color: var(--neon-cyan); pointer-events: none; }

        /* --- STATS & BARS --- */
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 20px; width: 100%; padding: 0 20px; }
        .stat-box { text-align: center; }
        .stat-label { font-size: 0.7rem; color: #888; letter-spacing: 1px; }
        .stat-val { font-size: 1.5rem; font-weight: bold; text-shadow: 0 0 10px currentColor; }
        
        .bar-wrapper { width: 80%; margin-top: 30px; }
        .bar-label { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        .progress-bar { height: 15px; background: #111; border: 1px solid #444; position: relative; overflow: hidden; border-radius: 2px; }
        .fill { height: 100%; width: 0%; transition: width 0.1s linear; }
        
        /* --- SHOP --- */
        .upgrade {
            display: flex; align-items: center; padding: 10px; margin-bottom: 10px;
            background: rgba(255,255,255,0.03); border: 1px solid #333; transition: 0.2s;
        }
        .upgrade:hover { background: rgba(255, 204, 0, 0.1); border-color: var(--neon-gold); }
        .upgrade.disabled { opacity: 0.5; pointer-events: none; }
        
        .up-icon { font-size: 1.5rem; margin-right: 15px; }
        .up-info { flex-grow: 1; }
        .up-name { font-weight: bold; font-size: 0.9rem; color: white; }
        .up-desc { font-size: 0.7rem; color: #aaa; }
        .up-cost { font-weight: bold; color: var(--neon-gold); }

        /* --- LOG --- */
        #console-log {
            height: 150px; background: #000; border: 1px solid #333;
            padding: 10px; overflow-y: hidden; font-size: 0.75rem; 
            color: var(--neon-green); font-family: 'Consolas', monospace;
            display: flex; flex-direction: column-reverse; /* Yeni loglar altta */
        }
        .log-line { margin-bottom: 4px; animation: fadeIn 0.3s; }

        /* --- ANIMATIONS & FX --- */
        @keyframes scanHorizontal { 0% { top: 0%; } 100% { top: 100%; } }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 25% { transform: translate(-2px, -2px) rotate(-1deg); } 50% { transform: translate(2px, 0px) rotate(1deg); } 75% { transform: translate(-1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -1px) rotate(-1deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        /* Par√ßacƒ±k Efekti (0 ve 1) */
        .particle {
            position: absolute; font-size: 1.2rem; font-weight: bold;
            pointer-events: none; animation: flyOut 0.8s forwards;
            color: var(--neon-green); text-shadow: 0 0 5px var(--neon-green);
            z-index: 99;
        }
        @keyframes flyOut { to { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; } }

        .floating-text {
            position: absolute; font-size: 1.2rem; font-weight: bold; 
            animation: floatUp 1s forwards; pointer-events: none; z-index: 99;
        }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-50px); opacity: 0; } }

        /* M√ºzik Butonu */
        #music-toggle {
            position: absolute; top: 20px; right: 20px; z-index: 200;
            background: transparent; border: 1px solid var(--neon-cyan); color: var(--neon-cyan);
            padding: 5px 15px; font-family: inherit; font-size: 0.8rem; cursor: pointer;
            text-transform: uppercase;
        }
        #music-toggle:hover { background: var(--neon-cyan); color: black; }

        /* Mobil */
        @media (max-width: 900px) {
            #game-layout { grid-template-columns: 1fr; overflow-y: auto; height: auto; display: block; }
            .panel { margin-bottom: 20px; }
        }
    </style>
</head>
<body>

    <div class="cyber-grid"></div>
    <div class="scanlines"></div>
    
    <button id="music-toggle" onclick="game.toggleMusic()">M√úZƒ∞ƒûƒ∞ BA≈ûLAT [OFF]</button>

    <div id="game-layout">
        
        <div class="panel">
            <h2>HEDEF Sƒ∞STEMLER</h2>
            <div id="target-list">
                </div>
            
            <div style="margin-top: auto;">
                <h2>Sƒ∞STEM G√úNL√úƒû√ú <span style="font-size:0.7rem; color:#666;">AUTO-CLEAR: 10s</span></h2>
                <div id="console-log"></div>
            </div>
        </div>

        <div class="panel" id="hack-container">
            <div class="stat-row">
                <div class="stat-box">
                    <div class="stat-label">TOPLAM VERƒ∞</div>
                    <div class="stat-val" style="color: var(--neon-cyan);" id="disp-data">0 TB</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">KRƒ∞PTO BAKƒ∞YE</div>
                    <div class="stat-val" style="color: var(--neon-gold);" id="disp-money">0 ‚Çø</div>
                </div>
            </div>

            <div style="font-size: 0.8rem; color: #888; margin-bottom: 10px;">
                ZAMAN √áARPANI: <span id="disp-multi" style="color:white; font-weight:bold;">x1.0</span> (+0.1 / 10sn)
            </div>

            <div id="hack-btn" onclick="game.hack(event)">
                <div class="btn-icon">‚ò†</div>
                <div class="btn-text">BAƒûLAN</div>
                <div id="cps-display" style="position: absolute; bottom: 30px; font-size: 0.7rem; color: #aaa;">0 CPS</div>
            </div>

            <div class="bar-wrapper">
                <div class="bar-label">
                    <span style="color:var(--neon-green)">SIZMA BA≈ûARISI</span>
                    <span id="breach-txt">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="fill" id="breach-bar" style="background: var(--neon-green); box-shadow: 0 0 10px var(--neon-green);"></div>
                </div>

                <div class="bar-label" style="margin-top: 15px;">
                    <span style="color:var(--neon-pink)">TESPƒ∞T Rƒ∞SKƒ∞ (HIZLI TIKLAMA = Y√úKSEK Rƒ∞SK)</span>
                    <span id="risk-txt">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="fill" id="risk-bar" style="background: var(--neon-pink); box-shadow: 0 0 10px var(--neon-pink);"></div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h2>KARABORSA <span id="income-txt" style="font-size:0.7rem;">0 ‚Çø/sn</span></h2>
            <div id="shop-list" style="overflow-y: auto; height: 100%;">
                
                <div class="upgrade" id="btn-cpu" onclick="game.buy('cpu')">
                    <div class="up-icon">‚ö°</div>
                    <div class="up-info">
                        <div class="up-name">CPU Overclock</div>
                        <div class="up-desc">Veri kazanƒ±mƒ±nƒ± arttƒ±rƒ±r.</div>
                    </div>
                    <div class="up-cost" id="cost-cpu">50</div>
                </div>

                <div class="upgrade" id="btn-bot" onclick="game.buy('bot')">
                    <div class="up-icon">ü§ñ</div>
                    <div class="up-info">
                        <div class="up-name">Botnet Aƒüƒ±</div>
                        <div class="up-desc">Otomatik sƒ±zma saƒülar.</div>
                    </div>
                    <div class="up-cost" id="cost-bot">250</div>
                </div>

                <div class="upgrade" id="btn-mine" onclick="game.buy('mine')">
                    <div class="up-icon">‚õèÔ∏è</div>
                    <div class="up-info">
                        <div class="up-name">Kripto Rig</div>
                        <div class="up-desc">Pasif gelir √ºretir.</div>
                    </div>
                    <div class="up-cost" id="cost-mine">600</div>
                </div>

                <div class="upgrade" id="btn-cool" onclick="game.buy('cool')">
                    <div class="up-icon">‚ùÑÔ∏è</div>
                    <div class="up-info">
                        <div class="up-name">Sƒ±vƒ± Soƒüutma</div>
                        <div class="up-desc">Risk daha hƒ±zlƒ± d√º≈üer.</div>
                    </div>
                    <div class="up-cost" id="cost-cool">200</div>
                </div>

                <div class="upgrade" id="btn-stealth" onclick="game.buy('stealth')">
                    <div class="up-icon">üëª</div>
                    <div class="up-info">
                        <div class="up-name">Hayalet VPN</div>
                        <div class="up-desc">Hƒ±z bazlƒ± riski azaltƒ±r.</div>
                    </div>
                    <div class="up-cost" id="cost-stealth">400</div>
                </div>

            </div>
        </div>

    </div>

    <script>
        /* --- SES Sƒ∞STEMƒ∞ (WEB AUDIO API) --- */
        class AudioEngine {
            constructor() {
                this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                this.isPlaying = false;
                this.droneOsc = null;
                this.filter = null;
            }

            // M√ºzik: Karanlƒ±k Cyberpunk Drone
            toggleMusic() {
                if (this.ctx.state === 'suspended') this.ctx.resume();
                
                if (this.isPlaying) {
                    this.droneOsc.stop();
                    this.isPlaying = false;
                    document.getElementById('music-toggle').innerText = "M√úZƒ∞ƒûƒ∞ BA≈ûLAT [OFF]";
                } else {
                    // Osilat√∂r olu≈ütur (Bas sesi)
                    this.droneOsc = this.ctx.createOscillator();
                    this.droneOsc.type = 'sawtooth';
                    this.droneOsc.frequency.setValueAtTime(55, this.ctx.currentTime); // D√º≈ü√ºk frekans (A1)

                    // Filtre (Boƒüuk ses i√ßin)
                    this.filter = this.ctx.createBiquadFilter();
                    this.filter.type = 'lowpass';
                    this.filter.frequency.setValueAtTime(400, this.ctx.currentTime);
                    
                    // LFO (Filtreyi hareket ettirmek i√ßin - nefes alma efekti)
                    const lfo = this.ctx.createOscillator();
                    lfo.type = 'sine';
                    lfo.frequency.setValueAtTime(0.2, this.ctx.currentTime); // Yava≈ü
                    const lfoGain = this.ctx.createGain();
                    lfoGain.gain.setValueAtTime(300, this.ctx.currentTime);
                    
                    lfo.connect(lfoGain);
                    lfoGain.connect(this.filter.frequency);
                    lfo.start();

                    // Gain (Ses seviyesi)
                    const masterGain = this.ctx.createGain();
                    masterGain.gain.setValueAtTime(0.15, this.ctx.currentTime);

                    // Baƒülantƒ±
                    this.droneOsc.connect(this.filter);
                    this.filter.connect(masterGain);
                    masterGain.connect(this.ctx.destination);
                    
                    this.droneOsc.start();
                    this.isPlaying = true;
                    document.getElementById('music-toggle').innerText = "M√úZƒ∞ƒûƒ∞ DURDUR [ON]";
                }
            }

            // Efektler
            playSFX(type) {
                if (this.ctx.state === 'suspended') this.ctx.resume();
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                const t = this.ctx.currentTime;

                if (type === 'click') {
                    // Hi-tech click
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(800, t);
                    osc.frequency.exponentialRampToValueAtTime(100, t + 0.1);
                    gain.gain.setValueAtTime(0.1, t);
                    gain.gain.exponentialRampToValueAtTime(0.01, t + 0.1);
                    osc.start(t); osc.stop(t + 0.1);
                } 
                else if (type === 'money') {
                    // Coin sesi
                    osc.type = 'square';
                    osc.frequency.setValueAtTime(1200, t);
                    osc.frequency.linearRampToValueAtTime(1800, t + 0.1);
                    gain.gain.setValueAtTime(0.1, t);
                    gain.gain.exponentialRampToValueAtTime(0.01, t + 0.2);
                    osc.start(t); osc.stop(t + 0.2);
                }
                else if (type === 'alert') {
                    // Alarm sesi
                    osc.type = 'sawtooth';
                    osc.frequency.setValueAtTime(150, t);
                    osc.frequency.linearRampToValueAtTime(100, t + 0.3);
                    gain.gain.setValueAtTime(0.2, t);
                    gain.gain.linearRampToValueAtTime(0, t + 0.3);
                    osc.start(t); osc.stop(t + 0.3);
                }

                osc.connect(gain);
                gain.connect(this.ctx.destination);
            }
        }

        /* --- OYUN MANTIƒûI --- */
        const TARGETS = [
            { id: 0, name: "Ev Aƒüƒ±", hp: 100, sec: 1.0, reward: 10, lvl: 1 },
            { id: 1, name: "Kafe Wi-Fi", hp: 250, sec: 1.5, reward: 30, lvl: 2 },
            { id: 2, name: "ATM Sistemi", hp: 600, sec: 2.0, reward: 80, lvl: 3 },
            { id: 3, name: "Kurumsal Server", hp: 1500, sec: 3.0, reward: 250, lvl: 5 },
            { id: 4, name: "Devlet Ar≈üivi", hp: 4000, sec: 5.0, reward: 800, lvl: 8 },
            { id: 5, name: "K√ºresel Uydu", hp: 10000, sec: 8.0, reward: 2500, lvl: 12 }
        ];

        class CyberGame {
            constructor() {
                this.audio = new AudioEngine();
                
                // Deƒüi≈ükenler
                this.money = 0;
                this.data = 0;
                this.level = 1;
                this.timeMultiplier = 1.0; // Zamanla artan √ßarpan
                
                // ƒ∞statistikler
                this.stats = {
                    clickPower: 2,
                    riskCooling: 1.5, // Saniyede d√º≈üen risk
                    autoHack: 0,
                    passiveIncome: 0,
                    stealth: 1.0 // CPS cezasƒ±nƒ± azaltƒ±r
                };

                // Y√ºkseltmeler
                this.upgrades = { cpu: 1, bot: 0, mine: 0, cool: 1, stealth: 1 };
                
                // Ge√ßici Durum
                this.currentTargetId = 0;
                this.breach = 0;
                this.risk = 0;
                this.locked = false;
                this.clickTimes = []; // CPS hesaplamak i√ßin tƒ±klama zamanlarƒ±
                
                this.init();
            }

            init() {
                this.renderTargets();
                this.updatePrices();
                
                // Oyun D√∂ng√ºs√º (60 FPS)
                setInterval(() => this.loop(), 1000/60);
                
                // Zaman √áarpanƒ± (10 saniyede bir artar)
                setInterval(() => {
                    if (!this.locked) {
                        this.timeMultiplier += 0.1;
                        document.getElementById('disp-multi').innerText = "x" + this.timeMultiplier.toFixed(1);
                        this.log("Sistem baƒülantƒ± s√ºresi arttƒ±. √áarpan: x" + this.timeMultiplier.toFixed(1));
                    }
                }, 10000);

                // Log Temizliƒüi (10 saniyede bir)
                setInterval(() => this.cleanLogs(), 10000);
            }

            renderTargets() {
                const list = document.getElementById('target-list');
                list.innerHTML = "";
                TARGETS.forEach(t => {
                    const el = document.createElement('div');
                    el.className = `target-item ${this.level < t.lvl ? 'locked' : ''} ${this.currentTargetId === t.id ? 'active' : ''}`;
                    el.innerHTML = `
                        <div class="t-name">${t.name}</div>
                        <div class="t-info"><span>G√úVENLƒ∞K: x${t.sec}</span> <span>√ñD√úL: ${t.reward} ‚Çø</span></div>
                    `;
                    el.onclick = () => { if(this.level >= t.lvl) this.setTarget(t.id); };
                    list.appendChild(el);
                });
            }

            setTarget(id) {
                this.currentTargetId = id;
                this.breach = 0;
                this.risk = 0;
                this.renderTargets();
                this.log(`Hedef deƒüi≈ütirildi: ${TARGETS[id].name}`);
            }

            // TIKLAMA HIZI (CPS) ve Rƒ∞SK HESABI
            calculateCPS() {
                const now = Date.now();
                // 1 saniye √∂nceki tƒ±klamalarƒ± filtrele
                this.clickTimes = this.clickTimes.filter(t => now - t < 1000);
                return this.clickTimes.length;
            }

            hack(e) {
                if (this.locked) { this.audio.playSFX('alert'); return; }

                // CPS Takibi
                this.clickTimes.push(Date.now());
                const cps = this.calculateCPS();
                document.getElementById('cps-display').innerText = cps + " CPS";

                const target = TARGETS[this.currentTargetId];
                
                // Sƒ±zma Artƒ±≈üƒ±
                this.breach += this.stats.clickPower;

                // Rƒ∞SK HESABI: CPS ne kadar y√ºksekse, risk o kadar katlanarak artar.
                // Stealth y√ºkseltmesi bu cezayƒ± azaltƒ±r.
                let speedPenalty = (cps * cps) / 15; // Karesel artƒ±≈ü (Hƒ±zlƒ± tƒ±klama = √ñl√ºm)
                let baseRisk = target.sec;
                let finalRisk = (baseRisk + speedPenalty) / this.stats.stealth;
                
                this.risk += finalRisk;

                // G√∂rsel Efektler
                this.audio.playSFX('click');
                this.spawnParticles(e.clientX, e.clientY);
                
                // Hack Butonu Animasyonu
                const btn = document.getElementById('hack-btn');
                btn.style.transform = "scale(0.95)";
                setTimeout(() => btn.style.transform = "scale(1)", 50);

                this.checkState();
            }

            loop() {
                // Pasif Gelir
                if (this.stats.passiveIncome > 0) {
                    this.money += (this.stats.passiveIncome / 60) * this.timeMultiplier;
                }

                // Otomatik Bot Hack
                if (!this.locked && this.stats.autoHack > 0) {
                    this.breach += this.stats.autoHack / 60;
                }

                // Risk Soƒüutma
                if (!this.locked && this.risk > 0) {
                    this.risk -= this.stats.riskCooling / 60;
                    if (this.risk < 0) this.risk = 0;
                }

                // UI G√ºncelleme
                document.getElementById('disp-money').innerText = Math.floor(this.money).toLocaleString() + " ‚Çø";
                document.getElementById('disp-data').innerText = Math.floor(this.data) + " TB";
                
                const breachPct = Math.min(100, (this.breach / TARGETS[this.currentTargetId].hp) * 100);
                document.getElementById('breach-bar').style.width = breachPct + "%";
                document.getElementById('breach-txt').innerText = Math.floor(breachPct) + "%";

                document.getElementById('risk-bar').style.width = Math.min(100, this.risk) + "%";
                document.getElementById('risk-txt').innerText = Math.floor(this.risk) + "%";
                document.getElementById('income-txt').innerText = (this.stats.passiveIncome * this.timeMultiplier).toFixed(1) + " ‚Çø/sn";

                // Tehlike Efekti
                const btn = document.getElementById('hack-btn');
                if (this.risk > 80) btn.classList.add('danger');
                else btn.classList.remove('danger');

                this.checkState();
                this.updateButtons();
            }

            checkState() {
                const target = TARGETS[this.currentTargetId];

                // Ba≈üarƒ±lƒ± Hack
                if (this.breach >= target.hp) {
                    this.breach = 0;
                    
                    // √ñd√ºl Hesabƒ±: Baz √ñd√ºl x Zaman √áarpanƒ± (Kripto kazanƒ±mƒ± azaltƒ±ldƒ± ama √ßarpanla artƒ±yor)
                    let finalReward = (target.reward * 0.5) * this.timeMultiplier; 
                    
                    this.money += finalReward;
                    this.data += target.lvl * 2;
                    
                    this.audio.playSFX('money');
                    this.log(`SIZMA BA≈ûARILI! +${Math.floor(finalReward)} ‚Çø`);
                    this.createFloatText(`+${Math.floor(finalReward)}`, '#ffcc00');

                    // Seviye Atlama
                    if (this.data > this.level * 100) {
                        this.level++;
                        this.log("SEVƒ∞YE ATLADINIZ!");
                        this.renderTargets();
                    }
                }

                // Yakalanma
                if (this.risk >= 100) {
                    this.risk = 100;
                    this.lockSystem();
                }
            }

            lockSystem() {
                if(this.locked) return;
                this.locked = true;
                this.audio.playSFX('alert');
                this.log("Sƒ∞STEM Kƒ∞Lƒ∞TLENDƒ∞! SOƒûUTMA BEKLENƒ∞YOR...", "red");
                
                // Zaman √áarpanƒ± Sƒ±fƒ±rlanƒ±r (Ceza)
                this.timeMultiplier = 1.0;
                document.getElementById('disp-multi').innerText = "x1.0";
                
                // 5 Saniye Ceza
                setTimeout(() => {
                    this.locked = false;
                    this.risk = 50;
                    this.log("Baƒülantƒ± yeniden kuruldu.");
                }, 5000);
            }

            spawnParticles(x, y) {
                for (let i = 0; i < 5; i++) {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    p.innerText = Math.random() > 0.5 ? "1" : "0";
                    p.style.left = x + "px";
                    p.style.top = y + "px";
                    
                    // Rastgele y√∂n
                    const tx = (Math.random() - 0.5) * 100 + "px";
                    const ty = (Math.random() - 0.5) * 100 + "px";
                    p.style.setProperty('--tx', tx);
                    p.style.setProperty('--ty', ty);
                    
                    document.body.appendChild(p);
                    setTimeout(() => p.remove(), 800);
                }
            }

            createFloatText(text, color) {
                const btn = document.getElementById('hack-btn');
                const rect = btn.getBoundingClientRect();
                const el = document.createElement('div');
                el.className = 'floating-text';
                el.innerText = text;
                el.style.left = (rect.left + rect.width/2) + "px";
                el.style.top = (rect.top) + "px";
                el.style.color = color;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 1000);
            }

            log(msg, color="#00ff66") {
                const con = document.getElementById('console-log');
                const line = document.createElement('div');
                line.className = 'log-line';
                line.style.color = color;
                line.innerText = `> ${msg}`;
                con.prepend(line); // En √ºste ekle
            }

            cleanLogs() {
                const con = document.getElementById('console-log');
                con.innerHTML = "";
                this.log("Sistem √∂nbelleƒüi temizlendi.", "#00f3ff");
            }

            toggleMusic() { this.audio.toggleMusic(); }

            /* --- MARKET Sƒ∞STEMƒ∞ --- */
            getCosts() {
                return {
                    cpu: Math.floor(50 * Math.pow(1.5, this.upgrades.cpu)),
                    bot: Math.floor(250 * Math.pow(1.4, this.upgrades.bot)),
                    mine: Math.floor(600 * Math.pow(1.4, this.upgrades.mine)),
                    cool: Math.floor(200 * Math.pow(1.5, this.upgrades.cool)),
                    stealth: Math.floor(400 * Math.pow(1.6, this.upgrades.stealth))
                };
            }

            updatePrices() {
                const c = this.getCosts();
                document.getElementById('cost-cpu').innerText = c.cpu;
                document.getElementById('cost-bot').innerText = c.bot;
                document.getElementById('cost-mine').innerText = c.mine;
                document.getElementById('cost-cool').innerText = c.cool;
                document.getElementById('cost-stealth').innerText = c.stealth;
            }

            buy(type) {
                const cost = this.getCosts()[type];
                if (this.money >= cost) {
                    this.money -= cost;
                    this.upgrades[type]++;
                    this.audio.playSFX('click');
                    
                    // √ñzellik G√ºncelleme
                    if (type === 'cpu') this.stats.clickPower += 2;
                    if (type === 'bot') this.stats.autoHack += 5;
                    if (type === 'mine') this.stats.passiveIncome += 10;
                    if (type === 'cool') this.stats.riskCooling += 0.5;
                    if (type === 'stealth') this.stats.stealth += 0.2; // Risk √ßarpanƒ±nƒ± b√∂ler

                    this.updatePrices();
                    this.log("Donanƒ±m y√ºkseltildi.");
                } else {
                    this.audio.playSFX('alert');
                }
            }

            updateButtons() {
                const c = this.getCosts();
                const check = (id, cost) => {
                    const btn = document.getElementById(id);
                    if (this.money >= cost) {
                        btn.classList.remove('disabled');
                        btn.style.borderColor = 'var(--neon-gold)';
                    } else {
                        btn.classList.add('disabled');
                        btn.style.borderColor = '#333';
                    }
                };
                check('btn-cpu', c.cpu);
                check('btn-bot', c.bot);
                check('btn-mine', c.mine);
                check('btn-cool', c.cool);
                check('btn-stealth', c.stealth);
            }
        }

        const game = new CyberGame();

    </script>
</body>
</html>
